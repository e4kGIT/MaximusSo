@model IEnumerable<Maximus.Data.Models.styleViewmodel>
@{
    Maximus.Data.Interface.Concrete.IUnitOfWork _unitOfWork = new Maximus.Data.InterFace.UnitOfWork();
    Maximus.Controllers.HomeController home = new Maximus.Controllers.HomeController(_unitOfWork);
    Maximus.Data.Models.DataProcessing hc = new Maximus.Data.Models.DataProcessing(_unitOfWork);
    Maximus.Services.Interface.IDataConnection _dataConnection = new Maximus.Services.DataConnectionService(_unitOfWork);
}

<div class="row">
    <div class="col-md-3">
        <center>
            @if (Session["costCenter"] != null)
            {
                if (((List<Maximus.Data.models.tblsop_customerorder_template_costcentre>
                    )Session["costCenter"]).Count > 0)
                {
                    Html.DevExpress().ComboBox(x =>
                    {
                        x.Name = "SiteCodeCmbgroupedProducts";
                        x.Properties.Caption = "Sitecode";
                        var projectcode = Session["selectedClientcode"] != null ? Session["selectedClientcode"].ToString().Split('|')[0].Trim() : "";
                        var data = ((List<Maximus.Data.models.tblsop_customerorder_template_costcentre>
                        )Session["costCenter"]).Where(xa => xa.ProjectCode == projectcode).Select(xa => xa.ProjectCode).ToList().IndexOf(projectcode);
                        if (((List<Maximus.Data.models.tblsop_customerorder_template_costcentre>
                            )Session["costCenter"]).Count > 1)
                        {
                            foreach (var dat in (List<Maximus.Data.models.tblsop_customerorder_template_costcentre>
                                )Session["costCenter"])
                            {
                                x.Properties.Items.Add(dat.ProjectCode + " | " + dat.SiteName);
                            }
                        }
                        else
                        {
                            x.SelectedIndex = 0;
                            x.Properties.Items.Add(((List<Maximus.Data.models.tblsop_customerorder_template_costcentre>
                            )Session["costCenter"])[0].ProjectCode + " | " + ((List<Maximus.Data.models.tblsop_customerorder_template_costcentre>
                                )Session["costCenter"])[0].SiteName);
                        }
                        if (data > -1)
                        {
                            x.SelectedIndex = data;
                        }
                    }).GetHtml();
                }
            }

        </center>
    </div>
</div>
<br />
@{
    var cardView = Html.DevExpress().CardView(settings =>
    {
        #region settings
        settings.Name = "CardView";
        settings.CallbackRouteValues = new { Controller = "Home", Action = "CardViewPartial" };
        settings.SettingsPager.SettingsTableLayout.ColumnCount = 2;
        settings.SettingsEditing.Mode = CardViewEditingMode.PopupEditForm;
        settings.SettingsBehavior.ConfirmDelete = true;
        settings.ControlStyle.CssClass = "padder";
        //settings.SettingsSearchPanel.Visible = true;
        var reason = false;
        var colc = Session["cardColumns"];
        var template = (List<string>)Session["Templates"];
        var businessId = Session["BuisnessId"].ToString();
        var selUcode = Session["SelectedUcode"] == null ? "" : Session["SelectedUcode"].ToString();
        colc = Session["ColorSizestyle"].ToString() == "SWATCHES" ? 1 : colc;
        if (Convert.ToInt16(colc) > 0)
        {
            int col = Convert.ToInt16(colc);
            settings.SettingsPager.SettingsTableLayout.ColumnCount = col;
        }
        else
        {
            settings.SettingsPager.SettingsTableLayout.ColumnCount = 2;
        }
        var rowc = Session["cardRows"];
        if (Convert.ToInt16(rowc) > 0)
        {
            int ro = Convert.ToInt16(rowc);
            settings.SettingsPager.SettingsTableLayout.RowsPerPage = ro;
        }
        else
        {
            settings.SettingsPager.SettingsTableLayout.RowsPerPage = 10;
        }
        //settings.SettingsPopup.EditForm.Width = 600;
        settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
        settings.SettingsEditing.Mode = CardViewEditingMode.EditForm;

        settings.SettingsBehavior.ConfirmDelete = true;
        settings.KeyFieldName = "StyleID";

        settings.SettingsPager.Mode = GridViewPagerMode.ShowPager;
        settings.SettingsPager.Visible = true;
        settings.Settings.ShowHeaderPanel = false;

        settings.Settings.ShowHeaderFilterButton = true;
        settings.Settings.EnableFilterControlPopupMenuScrolling = false;
        settings.SettingsBehavior.AllowSelectByCardClick = true;
        string filterExpression = ""; string filterExpressionSTR = "";
        #region prerendr
        settings.PreRender = (sender, e) =>
        {

            MVCxCardView cv = sender as MVCxCardView;
            for (int i = 0; i < cv.VisibleCardCount; i++)
            {
                string StyleID = (string)cv.GetCardValues(i, "StyleID");
                if (!StyleID.Contains(','))
                {
                    var clr1Lst = hc.getColors(StyleID);
                    //var size1Lst = hc.getSizes(StyleID);
                    List<string> colorLst = new List<string>();
                    int count1 = 0, count2 = 0;
                    if (clr1Lst != null)
                    {
                        foreach (var cl in clr1Lst.Where(s => s.ObsoleteCode == 0).ToList())
                        {

                            colorLst.Add(cl.ColorId.ToString());
                            count1 = count1 + 1;

                        }
                        foreach (string colors in colorLst)
                        {
                            if (home._styleColorSizeObsolete.Exists(y => y.StyleID == StyleID && y.ColourID == colors))
                            {
                                count2 = count2 + home._styleColorSizeObsolete.GetAll(y => y.StyleID == StyleID && y.ColourID == colors && y.Obsolete_Class == 0).Select(y => y.SizeID).Count();
                            }
                        }
                        if (count1 < 1 && count2 < 1)
                        {
                            filterExpressionSTR = filterExpressionSTR + "'" + StyleID + "',";

                        }
                    }
                }
            }
            if (filterExpressionSTR.Contains(','))
            {
                filterExpressionSTR = filterExpressionSTR.TrimEnd(',');
                filterExpression = "NOT [StyleID] IN (" + filterExpressionSTR + ")";
                cv.FilterExpression = filterExpression;
            }
        };
        #endregion

        settings.CardLayoutCreated = (sender, e) =>
        {
            string BusinessId = Session["BuisnessId"].ToString();
            var reasons = home._reason.GetAll(xs => xs.BusinessId == BusinessId).Select(c => new { c.Description }).ToList();
            reason = reasons.Count > 0 ? true : false;
            MVCxCardView cv = sender as MVCxCardView;
            string StyleID = (string)cv.GetCardValues(e.VisibleIndex, "StyleID");
            if (ViewBag.page != null)
            {
                if (ViewBag.page)
                {
                    cv.PageIndex = 0;
                }
            }
            if (e.VisibleIndex >= 0)
            {
                bool value = (bool)cv.GetCardValues(e.VisibleIndex, "isAllocated");
                if (value)
                {

                    //e.Properties.Items[1].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[2].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[3].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[0].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[6].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[7].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[4].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[5].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[8].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[9].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[10].ParentContainerStyle.CssClass = "itemToHide";
                }
                else
                {

                    if (template.Count == 0)
                    {
                        e.Properties.Items[1].ParentContainerStyle.CssClass = "itemToHide";

                        if (reasons.Count == 0)
                        {
                            //e.Properties.Items[7].ParentContainerStyle.CssClass = "itemToHide";

                        }
                    }
                    else
                    {
                        if (reasons.Count == 0)
                        {
                            //e.Properties.Items[7].ParentContainerStyle.CssClass = "itemToHide";

                        }
                    }

                }
            }
        };

        #endregion

        #region cardview Column defenitions

        settings.Columns.Add(c =>
        {
            c.FieldName = "Entitlement";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add("StyleID");

        settings.Columns.Add(c =>
        {
            c.FieldName = "SizeId";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add("Description");
        settings.Columns.Add(c =>
        {
            c.FieldName = "Price";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "StyleImage";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "Dimensions";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "Caption";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "Quantity";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "BasketButton";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        #endregion

        #region cardviewlayoutproperties defenition
        settings.CardLayoutProperties.ColCount = 1;

        #region styleimage
        settings.CardLayoutProperties.Items.Add(i =>
        {
            i.ColumnName = "StyleImage";
            i.ShowCaption = DefaultBoolean.False;
            i.SetTemplateContent(x =>
            {
                var Assembly = Convert.ToInt16(DataBinder.Eval(x.DataItem, "Assembly"));
                var orgstyl = Convert.ToString(DataBinder.Eval(x.DataItem, "OriginalStyleid"));
                string style = DataBinder.Eval(x.DataItem, "StyleID").ToString();
                var divImg = "DivImgDem" + style;
                var styleimg = DataBinder.Eval(x.DataItem, "StyleImage");
                var content = "";
                if (Convert.ToBoolean(Session["POINTSREQ"]))
                {
                    if (((Maximus.Data.models.PointsModel)Session["Pointsmodel"]).LstStyles != null)
                    {
                        foreach (var item in ((Maximus.Data.models.PointsModel)Session["Pointsmodel"]).LstStyles)
                        {
                            if (item.Style == style | style.Contains(item.Style))
                            {
                                content = content + "<div class='row'><center><h4>This style points: " + item.Points + "</h4></center></div>";
                                break;
                            }
                        }
                    }
                }
                //content = string.Format(content + "<div class='col-md-3 col-xs-3 col-sm-3 col-lg-3 pull-left'><img height='40' width='40' src=\"/Content/Images/360.png\"  style='cursor:pointer;' onclick='open360()' title='Click here to view the product in 360'/><div Id=" + divImg + "><img src=\"{0}\" height='70%' width='70%' onclick='Getimage(\"{0}\")' /></div></div>", styleimg);
                if (style.Contains(","))
                {
                    var stylArr = style.Split(',');
                    content = string.Format(content + "<div class='col-md-3 col-xs-3 col-sm-3 col-lg-3 pull-left'><div Id=" + divImg + "><img src=\"{0}\" height='70%' width='70%' style='cursor:pointer;' onclick=\"Getimage('{0}','{1}')\" /><img src='/Content/Images/multi.png' onclick=\"Getimage('{0}','{1}')\" style='position:absolute;height:20px;cursor:pointer;' title='click here to see all the images'/></div></div>", styleimg, stylArr[0]);
                }
                else
                {
                    content = string.Format(content + "<div class='col-md-3 col-xs-3 col-sm-3 col-lg-3 pull-left'><div Id=" + divImg + "><img src=\"{0}\" height='70%' width='70%'  style='cursor:pointer;' onclick=\"Getimage('{0}','{1}')\" /><img src='/Content/Images/multi.png' onclick=\"Getimage('{0}','{1}')\" title='click here to see all the images' style='position:absolute;height:20px;cursor:pointer;'/></div></div>", styleimg, style);
                }

                ViewContext.Writer.Write(content);
                ViewContext.Writer.Write("<div class='col-md-7 col-xs-7 col-sm-7 col-lg-7'><br/><div class='row'><div class='col-md-12 col-xs-12 col-sm-12 col-lg-12'>");
                if (template.Count > 0)
                {
                    string viewContent = string.Format("<div class='row fonter'><div class='col-md-12 col-xs-12 col-sm-12 col-lg-12' style='padding:0px;'><b>Product:</b><span id='LbDescription" + style + "'>{0}</span></div>", home._tblFskStyle.GetAll(s => s.StyleID == style.ToString()).FirstOrDefault().Description != null ? home._tblFskStyle.GetAll(s => s.StyleID == style.ToString()).FirstOrDefault().Description.ToString() : "");
                    ViewContext.Writer.Write(viewContent);
                }
                else
                {
                    //var orgStyle = (DataBinder.Eval(x.DataItem, "OriginalStyleid")).ToString();
                    var style1 = (DataBinder.Eval(x.DataItem, "StyleID")).ToString();
                    if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                    {
                        if (style1.Contains(','))
                        {
                            var styledex = (DataBinder.Eval(x.DataItem, "StyleID")).ToString();

                            var styleArr = style1.Split(',');
                            var styleat1 = styleArr[0];
                            var descritption = string.Format("<div class='row'><div class='col-md-12 col-xs-12 col-sm-12 col-lg-12' style='padding:0px;'><b>Product</b><hr style=\"margin: 0;\"/>" + style.ToString().Split('/')[0] + "<span>&nbsp;</span><span>-</span><span class='fonter' id='LbdemandDescription" + styleat1 + "'> {0}</span></div></div>", home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description != null ? home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description.ToString() : "");

                            ViewContext.Writer.Write(descritption);
                            ViewContext.Writer.Write("<br/><br/></div>");
                            ViewContext.Writer.Write("<div class='col-md-12 col-xs-12 col-sm-12 col-lg-12'><div class='row'> <b>Fit</b><hr style=\"margin: 0;\"/>");

                            var divContent = "<fieldset class='swatch-picker' name=\"Swatch_DemandStyle_FieldSet_" + style + "\">";
                            foreach (string styler in styleArr)
                            {
                                if (Array.IndexOf(styleArr, styler) == 0)
                                {
                                    divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResultModelDemandSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, styler.Contains('/') ? styler.Split('/')[1] : styler, orgstyl);
                                }
                                else
                                {
                                    divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio' onclick=\"GetDrpResultModelDemandSwatch('{0}','{1}','{3}');\" id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' /><span class='spanner1' ><center >{2}</center></span></label>", style, styler, styler.Contains('/') ? styler.Split('/')[1] : styler, orgstyl);
                                }
                            }

                            divContent = divContent + "</fieldset><br/></div></div>";
                            ViewContext.Writer.Write(divContent);
                        }
                        else
                        {
                            string viewContent = string.Format("<div class='row fonter'><div class='col-md-12 col-xs-12 col-sm-12 col-lg-12'><b>Product</b><hr style=\"margin: 0;\"/>" + style + "<span>-</span><span  class='fonter' id='LbdemandDescription" + style + "'> {0}</span></div></div>", home._tblFskStyle.GetAll(s => s.StyleID == style.ToString()).FirstOrDefault().Description != null ? home._tblFskStyle.GetAll(s => s.StyleID == style.ToString()).FirstOrDefault().Description.ToString() : "");
                            ViewContext.Writer.Write(viewContent);
                        }
                    }
                    else
                    {
                        if (style1.Contains(','))
                        {
                            Html.DevExpress().ComboBox(
                                c =>
                                {
                                    var styleArr = style1.Split(',');
                                    c.Properties.Caption = "Style";
                                    c.Name = "styleDrp_" + style;
                                    foreach (string data in (string[])styleArr)
                                    {
                                        c.Properties.Items.Add(data);

                                    }
                                    c.SelectedIndex = 0;
                                    c.Properties.ClientSideEvents.SelectedIndexChanged = "GetDrpResultModel";
                                }
                                                ).Render();
                        }
                        else
                        {
                            string viewContent = "<div class='row'><div class='col-md-2 col-xs-2 col-sm-2 col-lg-2'><b>Style: &nbsp; &nbsp;</b></div><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'>" + style + "</div><div class='col-md-2 col-xs-2 col-sm-2 col-lg-2'></div></div>";
                            ViewContext.Writer.Write(viewContent);
                        }
                    }


                }

                if (style.ToString().Contains(','))
                {
                    ViewContext.Writer.Write("</div></div>");
                }
                else
                {
                    ViewContext.Writer.Write("</div></div></div>");
                }

                var content1 = "<div class='col-md-2 col-xs-2 col-sm-2 col-lg-2'><div class='row'>";
                bool value = (bool)(DataBinder.Eval(x.DataItem, "isAllocated"));
                if (Assembly != 0)
                {
                    if (value != true)
                    {
                        if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                        {
                            if (style.ToString().Contains(','))
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 col-xs-6 col-sm-6 col-lg-6' style='margin-top: 14px;padding:0px;'><center><img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssemblySwatch('{0}');\"/></center></div>", style);
                            }
                            else
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 col-xs-6 col-sm-6 col-lg-6' style='margin-top: 14px;padding:0px;'><center><img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssembly('{0}');\"/></center></div>", style);
                            }
                        }
                        else
                        {
                            if (style.ToString().Contains(','))
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 col-xs-6 col-sm-6 col-lg-6' style='margin-top: 14px;padding:0px;'><center><img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssembly('{0}');\"/></center></div>", style + "_" + orgstyl);
                            }
                            else
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 col-xs-6 col-sm-6 col-lg-6' style='margin-top: 14px;padding:0px;'><center><img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssembly('{0}');\"/></center></div>", style);
                            }
                        }


                    }
                }
                if (template.Count == 0 && Convert.ToBoolean(Session["REQSTKLEVEL"]) == false)

                {
                    if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                    {
                        if (value != true)
                        {
                            content1 = content1 + string.Format("<div class='col-md-6 col-xs-6 col-sm-6 col-lg-6' style='margin-top: 14px;'><center><img src='/Content/Images/empHistory.png' title='Entitlement and previous history' height='40' width='40' onclick=\"getEntitlementDemandSwatch('{0}','{1}');\"/></center></div>", style, orgstyl);
                        }
                    }
                    else
                    {
                        if (value != true)
                        {
                            content1 = content1 + string.Format("<div class='col-md-6 col-xs-6 col-sm-6 col-lg-6' style='margin-top: 14px;'><center><img src='/Content/Images/empHistory.png' title='Entitlement and previous history' height='40' width='40' onclick=\"getEntitlementDemandSwatch('{0}','{1}');\"/></center></div>", style, orgstyl);
                        }
                    }
                }
                content1 = content1 + "</div></div>";
                ViewContext.Writer.Write(content1);
            });
        });
        #endregion

        #region caption
        if (template.Count == 0)
        {
            settings.CardLayoutProperties.Items.Add(x =>
            {
                x.ColumnName = "Caption";
                x.ShowCaption = DefaultBoolean.False;
                x.SetTemplateContent(col =>
                {


                    var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                    string cap = "";
                    string desc = "";
                    if (style.Contains(","))
                    {
                        var styar = style.Split(',');
                        var sty1 = styar[0];
                        cap = home._dimFitCap.GetAll(s => s.StyleId == sty1).FirstOrDefault() == null ? "" : home._dimFitCap.GetAll(s => s.StyleId == sty1).FirstOrDefault().Caption;
                        desc = home._stylesView.GetAll(s => s.StyleID == sty1).FirstOrDefault() == null ? "" : home._stylesView.GetAll(s => s.StyleID == sty1).FirstOrDefault().Description;
                    }
                    else
                    {
                        cap = home._dimFitCap.GetAll(s => s.StyleId == style).FirstOrDefault() == null ? "" : home._dimFitCap.GetAll(s => s.StyleId == style).FirstOrDefault().Caption;
                        desc = home._stylesView.GetAll(s => s.StyleID == style).FirstOrDefault() == null ? "" : home._stylesView.GetAll(s => s.StyleID == style).FirstOrDefault().Description;
                    }
                    if (cap != null && cap != "")
                    {
                        ViewContext.Writer.Write(string.Format("<center>{0}</center>", cap));
                    }
                    else
                    {
                        ViewContext.Writer.Write(string.Format("<center>{0}</center>", desc));
                    }


                });
            });
        }
        #endregion

        #region dimension

        if (template.Count == 0)
        {
            settings.CardLayoutProperties.Items.Add(x =>
            {
                x.ColumnName = "Dimensions";
                x.ShowCaption = DefaultBoolean.False;
                x.SetTemplateContent(col =>
                {

                    var freeText = (string)(DataBinder.Eval(col.DataItem, "Dimensions"));

                    if (freeText != null && freeText != "")
                    {
                        Maximus.Data.Models.DataProcessing data = new Maximus.Data.Models.DataProcessing(_unitOfWork);

                        var svmLst = data.getFreeTextStyles(freeText, Session["SelectedEmp"].ToString(), Session["BuisnessId"].ToString());
                        var content = "<div class='row'>";
                        foreach (var svm in svmLst)
                        {
                            content = content + string.Format("<div class='col-md-2 col-xs-2 col-sm-2 col-lg-2'><div class='dimAllocdiv'><a style=\"cursor:pointer;\" onclick=\"getCard1('{1}')\"><center><img src='{0}'  style=\"margin:3px;\" height=\"150\" width=\"100\" /><br/>{1}</center></a></div></div>", svm.StyleImage, svm.StyleID);
                        }
                        content = content + "</div>";
                        ViewContext.Writer.Write(content);
                        //var content = string.Format("<a onclick='getDimAlloc(\"{0}\");'>Click here to see Products</a>", freeText);
                        //ViewContext.Writer.Write(string.Format("<center>{0}</center>", content));
                        //settings.ClientSideEvents.CardClick = "function getDim(){getDimAlloc('" + freeText + "')}";
                    }
                });
            });
        }
        #endregion

        #region color
        var firstColor = "";
        settings.CardLayoutProperties.Items.Add(x =>
        {
            x.ColumnName = "ColourId";
            x.ShowCaption = DefaultBoolean.False;
            x.SetTemplateContent(col =>
            {
                if (template.Count > 0)
                {
                    var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                    List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style);
                    var colorLst = home._customerOrderTemplate.GetAll(clr => template.Contains(clr.Template) && clr.Style == style && clr.BusinessID == businessId).Distinct().Select(clr => clr.Colour).Distinct().ToList();
                    if (Session["ColorSizestyle"].ToString() != "SWATCHES")
                    {
                        Html.DevExpress().ComboBox(
                c =>
                {
                    c.Name = "Color_Template_" + style;
                    foreach (var item in colorLst)
                    {
                        c.Properties.Items.Add(item);
                    }
                    if (c.Properties.Items.Count == 1)
                    {
                        c.SelectedIndex = 0; c.Enabled = true;
                    }
                }).GetHtml();
                    }
                    else
                    {
                        var content = "<b>Colour<b><hr style='margin: 0;'/><br/>"; content = content + "<fieldset class='swatch-picker' name=\"Swatch_DemColor_FieldSet_" + style + "\">";
                        if (colorLst != null)
                        {
                            if (colorLst.Count > 1)
                            {
                                foreach (var datItem in colorLst)
                                {
                                    var hexcode = home._fskColor.Exists(da => da.Description.Contains(datItem)) ? home._fskColor.GetAll(da => da.Description.Contains(datItem)).First().Colour_hexcode : "";
                                    if (lstC.Where(ax => ax.ObsoleteCode == 0).Select(xsa => xsa.ColorId).ToList().Contains(datItem))
                                    {
                                        if (datItem.ToLower().Contains("yell") | datItem.ToLower().Contains("whit"))
                                        {
                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"Swatch_ColorTemplate_" + style + "\" value='{1}'/><span class='spanner1'  ><center >{1}</center></span></label>", style, datItem);
                                        }
                                        else
                                        {
                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"   id='radio' name=\"Swatch_ColorTemplate_" + style + "\" value='{1}'/><span class='spanner1'><center >{1}</center></span></label>", style, datItem);
                                        }

                                    }

                                }
                            }
                            else if (colorLst.Count == 1)
                            {
                                if (lstC.Where(ax => ax.ObsoleteCode == 0).Select(xsa => xsa.ColorId).ToList().Contains(colorLst[0]))
                                {

                                    content = content + string.Format("<label class='swatchLabel'><input type='radio' checked onchange=\"GetClrDemImg('{0}-{1}')\"   id='radio' name=\"Swatch_ColorTemplate_" + style + "\" value='{1}'/><span class='spanner1'><center >{1}</center></span></label>", style, colorLst[0]);
                                }
                            }
                        }
                        content = content + "</fieldset><br/>";
                        ViewContext.Writer.Write(content);
                    }
                }
                else
                {
                    var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();

                    if (Session["ColorSizestyle"].ToString() != "SWATCHES")
                    {
                        Html.DevExpress().ComboBox(
                                  c =>
                                  {
                                      c.Name = "ColorDimview_" + "Drop_" + style;
                                      List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style);
                                      List<string> colorIdLst = (List<string>)home._styleColorSize.GetAll(s => s.StyleID == style).OrderBy(s => s.ColourID).Select(s => s.ColourID).Distinct().ToList();
                                      foreach (string data in colorIdLst)
                                      {
                                          c.Properties.Items.Add(data);

                                      }
                                      if (colorIdLst.Count() == 1)
                                      {
                                          c.SelectedIndex = 0; c.Enabled = false;
                                      }
                                      c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedColor";
                                  }
                                                  ).Render();

                    }
                    else
                    {

                        var content = "<b>Colour<b><hr style='margin: 0;'/><br/>";
                        content = content + "<fieldset class='swatch-picker' name=\"Swatch_DemColor_FieldSet_" + style + "\">";
                        //List<string> colorIdLst = (List<string>)home._styleColorSize.GetAll(s => s.StyleID == style).OrderBy(s => s.ColourID).Select(s => s.ColourID).Distinct().ToList();
                        //foreach (string data in colorIdLst)
                        //{
                        //    var hexcode = home._fskColor.Exists(da => da.Description.Contains(data)) ? home._fskColor.GetAll(da => da.Description.Contains(data)).First().Colour_hexcode : "";
                        //    if (colorIdLst.Count > 1)
                        //    {
                        //        content = content + string.Format("<label><input type='radio'  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}'/><span style='display: block; height:100%;width:100%' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                        //    }
                        //    else
                        //    {
                        //        content = content + string.Format("<label><input type='radio'  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span style='display: block; height:100%;width:100%' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);

                        //    }



                        if (style.Contains(','))
                        {
                            var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                            string style1 = style.Split(',')[0];
                            List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style1);
                            ////var ucodeColor = home._ucodes.GetAll(uc => uc.UCodeID == selUcode & uc.StyleID == orgStyle).Select(uc => uc.ColourID).ToList();
                            //List<string> lstC = (List<string>)home._styleColorSize.GetAll(s => s.StyleID == style1).OrderBy(s => s.ColourID).Select(s => s.ColourID).Distinct().ToList();
                            if (lstC != null)
                            {
                                if (lstC.Count > 1)
                                {
                                    foreach (var dr in lstC.Where(dts => dts.ObsoleteCode == 0).ToList())
                                    {
                                        if (lstC.IndexOf(dr) == 0)
                                        {
                                            firstColor = dr.ToString();
                                        }
                                        if (lstC.Where(dts => dts.ObsoleteCode == 0).Select(xs => xs.ColorId).ToList().Contains(dr.ColorId))
                                        {

                                            var color = dr.ColorId.ToString();
                                            var hexcode = home._fskColor.Exists(da => da.Description.Contains(color)) ? home._fskColor.GetAll(da => da.Description.Contains(color)).First().Colour_hexcode : "";
                                            if (lstC.Count > 1)
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}'/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, color);
                                            }
                                            else
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, color);

                                            }

                                        }
                                    }
                                }
                                else if (lstC.Count == 1)
                                {
                                    content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, lstC[0].ColorId);
                                }
                                content = content + "</fieldset><br/>";
                                ViewContext.Writer.Write(content);
                            }
                        }
                        else
                        {
                            var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                            List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style);
                            //var ucodeColor = home._ucodes.GetAll(uc => uc.UCodeID == selUcode & uc.StyleID == orgStyle).Select(uc => uc.ColourID).ToList();

                            if (lstC != null)
                            {
                                if (lstC.Where(dts => dts.ObsoleteCode == 0).Count() > 1)
                                {
                                    foreach (var dr in lstC.Where(dts => dts.ObsoleteCode == 0).ToList())
                                    {
                                        if (lstC.IndexOf(dr) == 0)
                                        {
                                            firstColor = dr.ColorId.ToString();
                                        }
                                        if (lstC.Where(dts => dts.ObsoleteCode == 0).Select(xs => xs.ColorId).ToList().Contains(dr.ColorId))
                                        {
                                            var color = dr.ColorId.ToString();
                                            var hexcode = home._fskColor.Exists(da => da.Description.Contains(color)) ? home._fskColor.GetAll(da => da.Description.Contains(color)).First().Colour_hexcode : "";
                                            if (lstC.Count > 1)
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}'/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, color);
                                            }
                                            else
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, color);

                                            }

                                        }
                                        else
                                        {
                                            var color = dr.ColorId.ToString();
                                            var hexcode = home._fskColor.Exists(da => da.Description.Contains(color)) ? home._fskColor.GetAll(da => da.Description.Contains(color)).First().Colour_hexcode : "";
                                            if (lstC.Where(dts => dts.ObsoleteCode == 0).Count() > 1)
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}'/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, color);
                                            }
                                            else
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, color);

                                            }

                                        }
                                    }
                                }
                                else if (lstC.Count == 1 && lstC.Any(dts => dts.ObsoleteCode == 0))
                                {

                                    content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, lstC[0].ColorId);
                                    //}
                                    //else
                                    //{
                                    //    content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, ucodeColor[0]);
                                    //}
                                }
                                else if (lstC.Where(dts => dts.ObsoleteCode == 0).Count() == 1)
                                {
                                    content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrDemImg('{0}-{1}')\"  id='radio' name=\"swatch_DemandColor_" + style + "\" class='' value='{1}' checked=\"checked\"/><span class='spanner1'><center><bold>{1}</bold></center></span></label>", style, lstC[0].ColorId);
                                }

                                content = content + "</fieldset><br/>";
                                ViewContext.Writer.Write(content);
                            }
                        }


                    }
                }
            });

        });
        #endregion

        #region size
        settings.CardLayoutProperties.Items.Add(x =>
        {
            x.ColumnName = "SizeId";
            x.ShowCaption = DefaultBoolean.False;
            x.SetTemplateContent(col =>
            {
                var reqDta = (DataBinder.Eval(col.DataItem, "ReqData")).ToString();
                var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(col.DataItem, "HasPreviousSize"));
                if (Session["ColorSizestyle"].ToString() != "SWATCHES")
                {
                    if (style.Contains(','))
                    {
                        Html.DevExpress().ComboBox(
                        c =>
                        {
                            var styleArr = style.Split(',');
                            string style1 = styleArr[0].ToString();
                            c.Name = "SizeDimview_" + "Drop_" + style;
                            List<string> sizeIdLst = (List<string>)home._style_Sizes.GetAll(s => s.StyleID == style1).Distinct().OrderBy(s => s.SeqNo).Select(s => s.SizeID).ToList();
                            foreach (string data in sizeIdLst)
                            {
                                c.Properties.Items.Add(data);
                            }
                            if (sizeIdLst.Count == 1)
                            {
                                c.SelectedIndex = 0; c.Enabled = false;
                            }
                            c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedSizeDimView";
                            if (prevHistory.Size != "")
                            {
                                foreach (DevExpress.Web.ListEditItem item in c.Properties.Items)
                                {
                                    if (item.ToString() == prevHistory.Size)
                                    {
                                        c.SelectedIndex = c.Properties.Items.IndexOf(item);
                                    }
                                }
                            }
                        }
                                        ).Render();

                    }
                    else
                    {
                        Html.DevExpress().ComboBox(
                        c =>
                        {
                            c.Name = "SizeDimview_" + "Drop_" + style;
                            List<string> sizeIdLst = (List<string>)home._style_Sizes.GetAll(s => s.StyleID == style).Distinct().OrderBy(s => s.SeqNo).Select(s => s.SizeID).ToList();
                            foreach (string data in sizeIdLst)
                            {
                                c.Properties.Items.Add(data);

                            }
                            if (sizeIdLst.Count == 1)
                            {
                                c.SelectedIndex = 0; c.Enabled = false;
                            }
                            c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedSizeDimView";
                            if (prevHistory.Size != "")
                            {
                                foreach (DevExpress.Web.ListEditItem item in c.Properties.Items)
                                {
                                    if (item.ToString() == prevHistory.Size)
                                    {
                                        c.SelectedIndex = c.Properties.Items.IndexOf(item);
                                    }
                                }
                            }
                        }
                                        ).Render();
                    }
                }
                else
                {
                    var content = "<b>Sizes<b><hr style='margin: 0;'/><br/><fieldset class='swatch-picker' name=\"Swatch_DemSize_FieldSet_" + style + "\">";

                    if (style.Contains(','))
                    {
                        var styleArr = style.Split(',');
                        string style1 = styleArr[0].ToString();
                        List<string> sizeIdLst = (List<string>)home._style_Sizes.GetAll(s => s.StyleID == style1).Distinct().OrderBy(s => s.SeqNo).Select(s => s.SizeID).ToList();
                        if ((bool)Session["IsBulkOrder1"] == true)
                        {
                            if (sizeIdLst.Count > 2)
                            {
                                if (reqDta == "")
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div><div class='col-md-6'><center>Quantity</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><br /><hr />";
                                    }
                                }
                                else
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><br /><hr />";
                                    }
                                }
                            }
                            else if (sizeIdLst.Count == 2)
                            {
                                if (reqDta == "")
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div>  <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div> <div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                    }

                                }
                                else
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div> <div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><br /><hr />";
                                    }
                                }
                            }
                            else if (sizeIdLst.Count == 1)
                            {
                                if (reqDta == "")
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-6'><center>. </center> </div><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center></div></div></div><div class='col-md-6' style='margin-bottom:15px;'><div class='row'> <div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>. </center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>. </center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>. </center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>. </center></div></div></div><br /><hr />";
                                    }
                                }
                                else
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>. </center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>. </center></div><div class='col-md-4'><center>.</center> </div> <div class='col-md-4'><center>. </center></div></div></div><br /><hr />";

                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>. </center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center></div></div></div><br /><hr />";

                                    }

                                }
                            }
                        }
                        foreach (string data in sizeIdLst)
                        {
                            if ((bool)Session["IsManPack"] == false && (bool)Session["IsBulkOrder1"] == false)
                            {
                                if (sizeIdLst.Count > 1)
                                {
                                    if (prevHistory.Size == data)
                                    {
                                        content = content + string.Format("<div  class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBoxDim_{0}_{1}\"  onblur=\"GetBulkPriceDim('{0}','{1}')\" type =\"number\" min=\"0\"  class=\"BulkSizeBoxDim_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><p><span id='LbPricedim_" + style + "_" + data + "'>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", data, style);
                                    }
                                    else
                                    {
                                        content = content + string.Format("<div  class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBoxDim_{0}_{1}\"  onblur=\"GetBulkPriceDim('{0}','{1}')\" type =\"number\" min=\"0\"  class=\"BulkSizeBoxDim_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><p><span id='LbPricedim_" + style + "_" + data + "'>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", data, style);
                                    }

                                }
                                else
                                {
                                    content = content + string.Format("<div  class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBoxDim_{0}_{1}\"  onblur=\"GetBulkPriceDim('{0}','{1}')\" type =\"number\" min=\"0\"  class=\"BulkSizeBoxDim_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><p><span id='LbPricedim_" + style + "_" + data + "'>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", data, style);
                                }
                            }
                            else if ((bool)Session["IsBulkOrder1"] == true)
                            {
                                if (sizeIdLst.Count > 1)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + data + "</center></div> <div class='col-md-6'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' id='BulkOrder1_price_Demand_" + style + "' style='text-align:right;' value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + data + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' style='text-align:right;' id='BulkOrder1_price_Demand_" + style + "' onchange=\"GetPriceValue('BulkOrder1_price_Demand_" + style + "')\" value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div> </div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }

                                    }
                                }
                                else
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + data + "</center></div> <div class='col-md-6'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' id='BulkOrder1_price_Demand_" + style + "' onchange=\"GetPriceValue('BulkOrder1_price_Demand_" + style + "')\" onchange=\"GetPriceValue('BulkOrder1_price_Demand_" + style + "')\" style='text-align:right;' value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }

                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + data + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' style='text-align:right;' id='BulkOrder1_price_Demand_" + style + "' onchange=\"GetPriceValue('BulkOrder1_price_Demand_" + style + "')\" value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div> </div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }

                                    }

                                }
                            }
                            else
                            {
                                if (sizeIdLst.Count > 1)
                                {
                                    if (prevHistory.Size == data)
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "' checked=\"checked\"/><span class='spanner1' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                    }
                                    else
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "'/><span class='spanner1' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                    }

                                }
                                else
                                {
                                    content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio'  name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "' checked=\"checked\"/><span class='spanner1'  onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                }
                            }
                        }
                        content = content + "</fieldset>";
                        ViewContext.Writer.Write(content);
                    }
                    else
                    {
                        List<Maximus.Data.models.BannerStyleClrSiz> omitSize = new List<Maximus.Data.models.BannerStyleClrSiz>();
                        List<Maximus.Data.models.BannerStyleClrSiz> nonOmitSize = new List<Maximus.Data.models.BannerStyleClrSiz>();
                        List<string> sizeIdLst = (List<string>)home._style_Sizes.GetAll(s => s.StyleID == style).Distinct().OrderBy(s => s.SeqNo).Select(s => s.SizeID).ToList();
                        if (Convert.ToBoolean(Session["IsEmergency"]) && Convert.ToBoolean(Session["REQSTKLEVEL"]))
                        {
                            var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                            if (orgStyle == "BA231")
                            {

                            }
                            var Lst = home.GetBannerSizes(orgStyle);
                            if (Lst.Count > 0)
                            {
                                foreach (var objBan in Lst)
                                {
                                    if (objBan.IsBannerObsolete == false)
                                    {
                                        if (home.GetFreeStockValue(objBan.BannerStyle, objBan.BannerColour, objBan.BannerSize, true) <= 0)
                                        {
                                            nonOmitSize.Add(objBan);
                                        }
                                        else
                                        {
                                            omitSize.Add(objBan);
                                        }
                                    }
                                }
                            }
                        }
                        if ((bool)Session["IsBulkOrder1"] == true)
                        {
                            if (sizeIdLst.Count > 2)
                            {
                                if (reqDta == "")
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div><div class='col-md-6'><center>Quantity</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><br /><hr />";
                                    }
                                }
                                else
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><br /><hr />";
                                    }
                                }
                            }
                            else if (sizeIdLst.Count == 2)
                            {
                                if (reqDta == "")
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div>  <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div> <div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                    }

                                }
                                else
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div> <div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><br /><hr />";
                                    }
                                }
                            }
                            else if (sizeIdLst.Count == 1)
                            {
                                if (reqDta == "")
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-6'><center>. </center> </div><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center></div></div></div><div class='col-md-6' style='margin-bottom:15px;'><div class='row'> <div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>. </center></div></div></div><br /><hr />";
                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>. </center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>. </center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>. </center></div></div></div><br /><hr />";
                                    }
                                }
                                else
                                {
                                    if (Session["Price"].ToString() == "hide")
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>. </center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>. </center></div><div class='col-md-4'><center>.</center> </div> <div class='col-md-4'><center>. </center></div></div></div><br /><hr />";

                                    }
                                    else
                                    {
                                        content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>. </center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center></div></div></div><br /><hr />";

                                    }

                                }
                            }
                        }
                        foreach (string data in sizeIdLst)
                        {
                            if ((bool)Session["IsManPack"] == false && (bool)Session["IsBulkOrder1"] == false)
                            {
                                if (sizeIdLst.Count > 1)
                                {
                                    if (prevHistory.Size == data)
                                    {
                                        content = content + string.Format("<div  class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBoxDim_{0}_{1}\"  onblur=\"GetBulkPriceDim('{0}','{1}')\" type =\"number\" min=\"0\"  class=\"BulkSizeBoxDim_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div  style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPricedim_" + style + "_" + data + "'>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", data, style);
                                    }
                                    else
                                    {
                                        content = content + string.Format("<div  class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBoxDim_{0}_{1}\"  onblur=\"GetBulkPriceDim('{0}','{1}')\" type =\"number\" min=\"0\"  class=\"BulkSizeBoxDim_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div  style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPricedim_" + style + "_" + data + "'>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", data, style);
                                    }
                                }
                                else
                                {
                                    content = content + string.Format("<div  class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBoxDim_{0}_{1}\"  onblur=\"GetBulkPriceDim('{0}','{1}')\" type =\"number\" min=\"0\"  class=\"BulkSizeBoxDim_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div  style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPricedim_" + style + "_" + data + "'>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", data, style);
                                }
                            }
                            else if ((bool)Session["IsBulkOrder1"] == true)
                            {
                                if (sizeIdLst.Count > 1)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\" ><div class='row'><div class='col-md-6'><center>" + data + "</center></div> <div class='col-md-6'><center><input type =\"number\" placeholder='Quantity'  id='" + style + "_demand_" + data + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  id='" + style + "_demand_" + data + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' id='BulkOrder1_price_Demand_" + style + "' onchange=\"GetPriceValue('BulkOrder1_price_Demand_" + style + "')\" style='text-align:right;' value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  id='" + style + "_demand_" + data + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'   min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'   min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + data + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' style='text-align:right;' id='BulkOrder1_price_Demand_" + style + "' onchange=\"GetPriceValue('BulkOrder1_price_Demand_" + style + "')\" value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div> </div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'   min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }

                                    }
                                }
                                else
                                {

                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + data + "</center></div> <div class='col-md-6'><center><input type =\"number\" placeholder='Quantity'  id='" + style + "_demand_" + data + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  id='" + style + "_demand_" + data + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' id='BulkOrder1_price_Demand_" + style + "' onchange=\"GetPriceValue('BulkOrder1_price_Demand_" + style + "')\" style='text-align:right;' value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  id='" + style + "_demand_" + data + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }

                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div> <div class='col-md-4'><center><input type =\"number\" id='" + style + "_demand_" + data + "' placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" id='" + style + "_demand_" + data + "' placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_Demand_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + data + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9'><center><input type='number' class='form-control' style='text-align:right;' id='BulkOrder1_price_Demand_" + style + "' value='" + hc.GetPrice(style, data, Session["BuisnessId"].ToString()) + "'/></center></div></div> </div><div class='col-md-3'><center><input type =\"number\" id='" + style + "_demand_" + data + "' placeholder='Quantity'  min=\"0\" id='" + style + "_demand_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_demand_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }

                                    }
                                }
                            }
                            else
                            {
                                if (sizeIdLst.Count > 1)
                                {
                                    if (prevHistory.Size == data)
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio'  name=\"swatch_DemandSize_" + style + "\" class=''  checked=\"checked\" value='" + data + "'/><span class='spanner1'  onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                    }
                                    else
                                    {
                                        if (Convert.ToBoolean(Session["IsEmergency"]) && Convert.ToBoolean(Session["REQSTKLEVEL"]))
                                        {

                                            if (omitSize.Select(s => s.BannerSize).ToList().Contains(data) == false && nonOmitSize.Select(s => s.UeSize).ToList().Contains(data) == false
                                        && omitSize.Select(s => s.BannerSize).ToList().Contains(data) && omitSize.Select(s => s.UeSize).ToList().Contains(data))
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio'  name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "'/><span class='spanner1' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                            }
                                            else if (omitSize.Select(s => s.BannerSize).ToList().Contains(data) == false && omitSize.Select(s => s.UeSize).ToList().Contains(data) == false)
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio'  name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "'/><span class='spanner1' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                            }
                                        }
                                        else
                                        {
                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio'  name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "'/><span class='spanner1' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                        }
                                    }
                                }
                                else
                                {
                                    if (Convert.ToBoolean(Session["IsEmergency"]) && Convert.ToBoolean(Session["REQSTKLEVEL"]))
                                    {

                                        if (omitSize.Select(s => s.BannerSize).Contains(data) == false && omitSize.Select(s => s.UeSize).Contains(data) == false && nonOmitSize.Select(s => s.BannerSize).Contains(data) && nonOmitSize.Select(s => s.UeSize).Contains(data))
                                        {
                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio'  name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "'/><span class='spanner1' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                        }
                                        else if (omitSize.Select(s => s.UeSize).Contains(data) == false && omitSize.Select(s => s.BannerSize).Contains(data) == false)
                                        {
                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio'  name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "'/><span class='spanner1' onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                        }
                                    }
                                    else
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"swatch_DemandSize_" + style + "\" class='' value='" + data + "' checked=\"checked\"/><span class='spanner1'  onclick=\"getSelectedSizeDemandSwatch('{0}','{1}')\"><center><bold>{1}</bold></center></span></label>", style, data);
                                    }
                                }

                            }

                        }

                        content = content + "</fieldset>";
                        ViewContext.Writer.Write(content);
                    }

                }
            });

        });

        #endregion

        #region price

        if ((bool)Session["IsManPack"] == true)
        {
            settings.CardLayoutProperties.Items.Add(x =>
            {
                x.ColumnName = "Price";
                x.ShowCaption = DefaultBoolean.False;
                x.SetTemplateContent(col =>
                {
                    if (template.Count > 0)
                    {
                        var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                        ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbTemplatePrice" + style + "'>{0}</div>", ""));
                        //ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbPrice" + style + "'>{0}</div>", price));
                    }
                    else
                    {
                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(col.DataItem, "HasPreviousSize"));
                        var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                        if (style.Contains(','))
                        {
                            var styleArr = style.Split(',');
                            string style1 = styleArr[0].ToString();
                            var color = home._style_Colour.Exists(s => s.StyleID == style1) == true ? home._style_Colour.GetAll(s => s.StyleID == style1).OrderBy(s => s.ColourID).FirstOrDefault().ColourID : "";
                            var size = home._style_Sizes.Exists(s => s.StyleID == style1) == true ? home._style_Sizes.GetAll(s => s.StyleID == style1).OrderBy(s => s.SeqNo).Count() == 1 ? home._style_Sizes.GetAll(s => s.StyleID == style1).OrderBy(s => s.SeqNo).FirstOrDefault().SizeID : "" : "";
                            var price = size == "" ? "" : home._styleSizePrice.Exists(s => s.StyleID == style1 && s.SizeID == size && s.BusinessId == businessId) == false ? "" : System.Math.Round(home._styleSizePrice.GetAll(s => s.StyleID == style1 && s.SizeID == size && s.BusinessId == businessId).FirstOrDefault().Price.Value, 2).ToString();
                            if (prevHistory.Size != "")
                            {
                                price = home._styleSizePrice.Exists(s => s.StyleID == style1 && s.SizeID == prevHistory.Size && s.BusinessId == businessId) == false ? "" : System.Math.Round(home._styleSizePrice.GetAll(s => s.StyleID == style1 && s.SizeID == prevHistory.Size && s.BusinessId == businessId && s.PriceID == 2).FirstOrDefault().Price.Value, 2).ToString();
                                if (price == "")
                                {
                                    price = home._styleSizePrice.Exists(s => s.StyleID == style1 && s.SizeID == size && s.BusinessId == "ALL") == false ? "" : System.Math.Round(home._styleSizePrice.GetAll(s => s.StyleID == style1 && s.SizeID == prevHistory.Size && s.PriceID == 2 && s.BusinessId == "ALL").FirstOrDefault().Price.Value, 2).ToString();
                                }
                            }

                            if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() != "readwrite")
                            {
                                var content = string.Format("<b>Price</b><hr style='margin: 0;'/><br/> <input class='form-control' id='DimviewPriceinput1" + style + "' readonly  type=\"number\" min=\"1\" max=\"10000\" value='{0}'/> ", price);
                                ViewContext.Writer.Write(content);
                            }
                            else if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() == "readwrite")
                            {
                                var content = string.Format("<b>Price</b><hr style='margin: 0;'/><br/> <input class='form-control' id='DimviewPriceinput1" + style + "' type=\"number\" min=\"1\" max=\"10000\" value='{0}'/> ", price);
                                ViewContext.Writer.Write(content);
                            }

                        }
                        else
                        {
                            // string businessId = Session["BuisnessId"].ToString();
                            var color = home._style_Colour.Exists(s => s.StyleID == style) == true ? home._style_Colour.GetAll(s => s.StyleID == style).OrderBy(s => s.ColourID).FirstOrDefault().ColourID : "";
                            var size = home._style_Sizes.Exists(s => s.StyleID == style) == true ? home._style_Sizes.GetAll(s => s.StyleID == style).OrderBy(s => s.SeqNo).Count() == 1 ? home._style_Sizes.GetAll(s => s.StyleID == style).OrderBy(s => s.SeqNo).FirstOrDefault().SizeID : "" : "";
                            var price = size == "" ? "" : home._styleSizePrice.Exists(s => s.StyleID == style && s.SizeID == size && s.BusinessId == businessId) == false ? "" : System.Math.Round(home._styleSizePrice.GetAll(s => s.StyleID == style && s.SizeID == size && s.BusinessId == businessId && s.PriceID == 2).FirstOrDefault().Price.Value, 2).ToString();
                            if (prevHistory.Size != "")
                            {
                                price = home._styleSizePrice.Exists(s => s.StyleID == style && s.SizeID == prevHistory.Size && s.BusinessId == businessId) == false ? "" : System.Math.Round(home._styleSizePrice.GetAll(s => s.StyleID == style && s.SizeID == prevHistory.Size && s.BusinessId == businessId && s.PriceID == 2).FirstOrDefault().Price.Value, 2).ToString();
                                if (price == "")
                                {
                                    price = home._styleSizePrice.Exists(s => s.StyleID == style && s.SizeID == prevHistory.Size && s.BusinessId == "ALL") == false ? "" : System.Math.Round(home._styleSizePrice.GetAll(s => s.StyleID == style && s.PriceID == 2 && s.SizeID == prevHistory.Size && s.BusinessId == "ALL").FirstOrDefault().Price.Value, 2).ToString();
                                }
                            }

                            if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() != "readwrite")
                            {
                                var content = string.Format("<b>Price</b><hr style='margin: 0;'/><br/> <input class='form-control' id='DimviewPriceinput1" + style + "' readonly  type=\"number\" min=\"1\" max=\"10000\" value='{0}'/> ", price);
                                ViewContext.Writer.Write(content);
                            }
                            else if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() == "readwrite")
                            {
                                var content = string.Format("<b>Price</b><hr style='margin: 0;'/><br/> <input class='form-control' id='DimviewPriceinput1" + style + "' type=\"number\" min=\"1\" max=\"10000\" value='{0}'/> ", price);
                                ViewContext.Writer.Write(content);
                            }

                        }
                    }
                });


            });
        }
        #endregion

        #region qty
        settings.CardLayoutProperties.Items.Add(x =>
        {
            x.ShowCaption = DefaultBoolean.False;
            x.SetTemplateContent(cont =>
            {
                var orgstyl = Convert.ToString(DataBinder.Eval(cont.DataItem, "OriginalStyleid"));
                var reqDta = DataBinder.Eval(cont.DataItem, "ReqData") != null ? (DataBinder.Eval(cont.DataItem, "ReqData")).ToString() : "";
                var content = "";
                if (template.Count > 0)
                {
                    var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();


                    content = content + "<div class='row reqDatadim" + style + "' style=\"display:none;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeadingdim" + style + "'></span></b><hr style='margin: 0;'/><div><input class='form-control reqdatatxtdim" + style + "'  id='reqdatatxtdim" + style + "' style='margin-top:10px' type=\"text\"/><br/></div></div></div>";
                    if ((bool)Session["IsManPack"] == true)
                    {
                        content = content + string.Format("<div class='row'><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b>Quantity</b><hr style='margin: 0;'/><div style='margin: 0;' class=\"center pull-left\"><p></p><div class=\"input-group\"><span class=\"input-group-btn\"><button type='button' class='qtyminusdemand btn backg' field='{0}'><span class=\"glyphicon glyphicon-minus\"></span></button></span><input  type='text' name='{0}'   class=\"qtyTextBox form-control input-number\" value=\"1\" min=\"1\" max=\"10000000\"><span class=\"input-group-btn\"><button type='button' class='qtyplusdemand  btn backg' field='{0}'><span class=\"glyphicon glyphicon-plus\"></span></button></span></div><p></p></div><br/>", "spinDemandEdit_" + style);
                    }
                    content = content + "</div>";
                    ViewContext.Writer.Write(content);
                }
                else
                {
                    var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                    if (reqDta == "")
                    {
                        if ((bool)Session["IsManPack"] == true || (bool)Session["IsBulkOrder"] == true)
                        {
                            content = content + "<div class='row reqDatadim" + style + "' style=\"display:none;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeadingdim" + style + "'></span></b><hr style='margin: 0;'/><div><input class='form-control reqdatatxtdim" + style + "'  id='reqdatatxtdim" + style + "' style='margin-top:10px' type=\"text\"/><br/></div></div></div>";
                        }
                        if ((bool)Session["IsManPack"] == true)
                        {
                            content = content + string.Format("<div class='row'><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b>Quantity</b><hr style='margin: 0;'/><div style='margin: 0;' class=\"center pull-left\"><p></p><div class=\"input-group\"><span class=\"input-group-btn\"><button type='button' onclick=\"minus('{0}')\" class='btn backg' field='{0}'><span class=\"glyphicon glyphicon-minus\"></span></button></span><input  type='text' name='{0}' style=\"text-align:center\" class=\"qtyTextBox form-control input-number\" value=\"1\" min=\"1\" max=\"10000000\"><span class=\"input-group-btn\"><button type='button' onclick=\"plus('{0}')\" class='btn backg' field='{0}'><span class=\"glyphicon glyphicon-plus\"></span></button></span></div><p></p></div><br/>", "spinDemandEdit_" + style);
                        }
                    }
                    else
                    {
                        if ((bool)Session["IsManPack"] == true || (bool)Session["IsBulkOrder"] == true)
                        {
                            content = content + "<div class='row reqDatadim" + style + "' style=\"display:block;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeadingdim" + style + "'>" + reqDta + "</span></b><hr style='margin: 0;'/><div> <input class='form-control reqdatatxtdim" + style + "' style='margin-top:10px'  id='reqdatatxtdim" + style + "'    type=\"text\"/><br/></div></div></div>";
                        }
                        if ((bool)Session["IsManPack"] == true)
                        {
                            content = content + string.Format("<div class='row'><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b>Quantity</b><hr style='margin: 0;'/><div style='margin: 0;' class=\"center pull-left\"><p></p><div class=\"input-group\"><span class=\"input-group-btn\"><button type='button' onclick=\"minus('{0}')\" class='btn backg' field='{0}'><span class=\"glyphicon glyphicon-minus\"></span></button></span><input  type='text' name='{0}' style=\"text-align:center\" class=\"qtyTextBox form-control input-number\" value=\"1\" min=\"1\" max=\"10000000\"><span class=\"input-group-btn\"><button type='button' onclick=\"plus('{0}')\" class='btn backg' field='{0}'><span class=\"glyphicon glyphicon-plus\"></span></button></span></div><p></p></div><br/>", "spinDemandEdit_" + style);
                        }
                    }

                    content = content + "</div>";
                    ViewContext.Writer.Write(content);
                    if (Session["OVERRIDE_ENT_WITH_REASON"].ToString().ToLower() == "show" && reason && home._pointStyle.Exists(s => s.UcodeID == selUcode && s.BusinessID == businessId) == false)
                    {
                        ViewContext.Writer.Write("<div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b>Reason</b><hr style='margin:0px'/><br>");
                        if (template.Count > 0)
                        {
                            //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                            var reasons = home._reason.Exists(xs => xs.BusinessId == businessId) ? home._reason.GetAll(xs => xs.BusinessId == businessId).Select(c => new { c.Description }).ToList() : null;

                            if (reasons != null)
                            {
                                Html.DevExpress().ComboBox(edit =>
                                {
                                    edit.Name = "CmbReasonTemplate_" + style;
                                    // edit.Properties.RenderIFrameForPopupElements = DefaultBoolean.Default;
                                    if (reasons.Count > 0)
                                    {
                                        foreach (var dta in reasons)
                                        {
                                            edit.Properties.Items.Add(dta.Description);
                                        }
                                    }
                                    else
                                    {

                                        edit.Enabled = false;
                                        edit.ToolTip = "No return reasons found for the current customer";
                                    }
                                }).GetHtml();
                                //ViewContext.Writer.Write("</div>");
                            }
                        }
                        else
                        {
                            //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                            //ViewContext.Writer.Write("<div class='col-md-2 col-xs-2 col-sm-2 col-lg-2'>");
                            Html.DevExpress().ComboBox(edit =>
                            {
                                //edit.Width = System.Web.UI.WebControls.Unit.Pixel(350);
                                edit.ControlStyle.CssClass = "styler";
                                edit.Name = "CmbDemandReason_" + style;
                                string BusinessId = Session["BuisnessId"].ToString();
                                //edit.Properties.RenderIFrameForPopupElements = DefaultBoolean.True;
                                var reasons = home._reason.GetAll(xs => xs.BusinessId == BusinessId).Select(c => new { c.Description }).ToList();
                                if (reasons.Count > 0)
                                {
                                    foreach (var dta in reasons)
                                    {
                                        edit.Properties.Items.Add(dta.Description);
                                    }
                                }
                                else
                                {

                                    edit.Enabled = false;
                                    edit.ToolTip = "No return reasons found for the current customer";
                                }
                            }).GetHtml();
                            //ViewContext.Writer.Write("</div>");
                        }
                        ViewContext.Writer.Write("</div>");
                    }
                    else
                    {
                        ViewContext.Writer.Write("<div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'></div>");
                    }
                    ViewContext.Writer.Write("<div class='col-md-3 col-xs-3 col-sm-3 col-lg-3' style='margin-top:26px;'>");
                    if (template.Count > 0)
                    {
                        //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(cont.DataItem, "HasPreviousSize"));
                        Html.DevExpress().Button(btn =>
                        {
                            btn.Name = "CartbtnTemplate_" + style + "_" + prevHistory.OrdQty + "_" + orgstyl;
                            btn.ControlStyle.CssClass = "btn btn-primary";
                            btn.ControlStyle.CssClass = "cartBtn";
                            btn.Text = "Add to cart &nbsp;&nbsp;<span class='glyphicon glyphicon-shopping-cart'></span>";
                            btn.EncodeHtml = false;
                            //btn.Width = System.Web.UI.WebControls.Unit.Pixel(300);
                            if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                            {
                                btn.ClientSideEvents.Click = "addTocartTemplateSwatch";
                            }
                            else
                            {
                                btn.ClientSideEvents.Click = "addTocartTemplate";
                            }
                        }).GetHtml();

                    }
                    else
                    {
                        //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();

                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(cont.DataItem, "HasPreviousSize"));
                        Html.DevExpress().Button(btn =>
                        {
                            if ((Convert.ToBoolean(Session["POINTSREQ"])))
                            {

                                if ((bool)Session["returnorder"])
                                {
                                    btn.Name = "CartbtnReorderPts_" + style + "_" + prevHistory.OrdQty + "_" + orgstyl;
                                }
                                else
                                {
                                    if (((Maximus.Data.models.PointsModel)Session["Pointsmodel"]).LstStyles != null)
                                    {
                                        btn.Name = "CartbtnDemandPts_" + style + "_" + prevHistory.OrdQty + "_" + orgstyl;
                                    }
                                    else
                                    {
                                        btn.Name = "CartbtnDemand_" + style + "_" + prevHistory.OrdQty + "_" + orgstyl;
                                    }
                                }
                            }
                            else
                            {
                                btn.Name = "CartbtnDemand_" + style + "_" + prevHistory.OrdQty + "_" + orgstyl;
                            }
                            btn.ControlStyle.CssClass = "btn btn-primary";
                            btn.ControlStyle.CssClass = "cartBtn";
                            btn.Text = "Add to cart &nbsp;&nbsp;<span class='glyphicon glyphicon-shopping-cart'></span>";
                            //btn.Width = System.Web.UI.WebControls.Unit.Pixel(300);


                            if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                            {
                                if ((bool)Session["IsManPack"] == true)
                                {
                                    if ((bool)Session["returnorder"])
                                    {
                                        btn.ClientSideEvents.Click = "addTocartReturnOrder";
                                    }
                                    else
                                    {
                                        btn.ClientSideEvents.Click = "addTocartDemandSwatch";
                                    }
                                }
                                else if ((bool)Session["IsBulkOrder1"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addToCartDemandBulkOrder1";
                                }
                            }
                            else
                            {
                                btn.ClientSideEvents.Click = "addTocart";
                            }
                            btn.EncodeHtml = false;

                        }).GetHtml();
                    }
                    ViewContext.Writer.Write("</div><div class='col-md-1 col-xs-1 col-sm-1 col-lg-1'></div></div>");

                    //Html.DevExpress().SpinEdit(edit =>
                    //{
                    //    edit.Name = "spinEdit_" + style;
                    //    edit.Properties.AllowMouseWheel = true;
                    //    edit.Properties.AllowUserInput = true;
                    //    edit.Properties.MinValue = 1;
                    //    edit.Number = 1;
                    //    edit.Properties.MaxValue = 1000000;
                    //}).GetHtml();
                }
            });

        });
        #endregion

        #endregion

        #region assigning values to the combobox
        #endregion
    });
    if (ViewData["EditError"] != null)
    {
        cardView.SetEditErrorText((string)ViewData["EditError"]);
    }
}
@cardView.Bind(Model).GetHtml()






@*<div class=\"input-group\">
        <span class=\"input-group-btn\">
            <button type='button' class='qtyminus btn' field='quantity123'>
            <span class=\"glyphicon glyphicon-minus\"></span>
            </button>
        </span>
        <input type='text' name='quantity123' class=\"form-control input-number\" value=\"1\" min=\"1\" max=\"10000000\">
        <span class=\"input-group-btn\">
            <button type='button' class='qtyplus  btn' field='quantity123'>
                <span class=\"glyphicon glyphicon-plus\"></span>
            </button>
        </span>
    </div>*@











