@model IEnumerable<Maximus.Data.Models.styleViewmodel>
@{
    Maximus.Data.Interface.Concrete.IUnitOfWork _unitOfWork = new Maximus.Data.InterFace.UnitOfWork();
    Maximus.Controllers.HomeController home = new Maximus.Controllers.HomeController(_unitOfWork);
    Maximus.Data.Models.DataProcessing hc = new Maximus.Data.Models.DataProcessing(_unitOfWork);
    Maximus.Services.Interface.IDataConnection _dataConnection = new Maximus.Services.DataConnectionService(_unitOfWork);
}
@{
    var cardView = Html.DevExpress().CardView(settings =>
    {
        #region settings
        settings.Name = "CardView";
        settings.CallbackRouteValues = new { Controller = "Home", Action = "CardViewPartial" };
        settings.SettingsPager.SettingsTableLayout.ColumnCount = 2;
        settings.SettingsEditing.Mode = CardViewEditingMode.PopupEditForm;
        settings.SettingsBehavior.ConfirmDelete = true;
        settings.ControlStyle.CssClass = "padder";
        //settings.SettingsSearchPanel.Visible = true;
        var reason = false;
        var colc = Session["cardColumns"];
        var template = (List<string>)Session["Templates"];
        var businessId = Session["BuisnessId"].ToString();
        var selUcode = Session["SelectedUcode"] == null ? "" : Session["SelectedUcode"].ToString();
        colc = Session["ColorSizestyle"].ToString() == "SWATCHES" ? 1 : colc;
        if (Convert.ToInt16(colc) > 0)
        {
            int col = Convert.ToInt16(colc);
            settings.SettingsPager.SettingsTableLayout.ColumnCount = col;
        }
        else
        {
            settings.SettingsPager.SettingsTableLayout.ColumnCount = 2;
        }
        var rowc = Session["cardRows"];
        if (Convert.ToInt16(rowc) > 0)
        {
            int ro = Convert.ToInt16(rowc);
            settings.SettingsPager.SettingsTableLayout.RowsPerPage = ro;

        }
        else
        {
            settings.SettingsPager.SettingsTableLayout.RowsPerPage = 10;
        }
        //settings.SettingsPopup.EditForm.Width = 600;
        settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
        settings.SettingsEditing.Mode = CardViewEditingMode.EditForm;

        settings.SettingsBehavior.ConfirmDelete = true;
        settings.KeyFieldName = "StyleID";

        settings.SettingsPager.Mode = GridViewPagerMode.ShowPager;
        settings.SettingsPager.Visible = true;
        settings.Settings.ShowHeaderPanel = false;

        settings.Settings.ShowHeaderFilterButton = true;
        settings.Settings.EnableFilterControlPopupMenuScrolling = false;
        settings.SettingsBehavior.AllowSelectByCardClick = true;
        //settings.Settings.ShowHeaderPanel = true;
        //settings.ClientSideEvents.BeginCallback = "BeginCallback";

        settings.ClientSideEvents.Init = "CheckConditions";
        string filterExpression = ""; string filterExpressionSTR = "";
        // Maximus.Models.e4kmaximusdbEntities entity = new Maximus.Models.e4kmaximusdbEntities();


        #region prerendr
        settings.PreRender = (sender, e) =>
        {

            MVCxCardView cv = sender as MVCxCardView;
            for (int i = 0; i < cv.VisibleCardCount; i++)
            {
                string StyleID = (string)cv.GetCardValues(i, "StyleID");
                if (!StyleID.Contains(','))
                {
                    var clr1Lst = hc.getColors(StyleID);
                    //var size1Lst = hc.getSizes(StyleID);
                    List<string> colorLst = new List<string>();
                    int count1 = 0, count2 = 0;
                    if (clr1Lst != null)
                    {
                        foreach (var cl in clr1Lst.Where(s => s.ObsoleteCode == 0).ToList())
                        {

                            colorLst.Add(cl.ColorId.ToString());
                            count1 = count1 + 1;

                        }
                        foreach (string colors in colorLst)
                        {
                            if (home._styleColorSizeObsolete.Exists(y => y.StyleID == StyleID && y.ColourID == colors))
                            {
                                count2 = count2 + home._styleColorSizeObsolete.GetAll(y => y.StyleID == StyleID && y.ColourID == colors && y.Obsolete_Class == 0).Select(y => y.SizeID).Count();
                            }
                        }
                        if (count1 < 1 && count2 < 0)
                        {
                            filterExpressionSTR = filterExpressionSTR + "'" + StyleID + "',";

                        }
                    }
                }
            }
            if (filterExpressionSTR.Contains(','))
            {
                filterExpressionSTR = filterExpressionSTR.TrimEnd(',');
                filterExpression = "NOT [StyleID] IN (" + filterExpressionSTR + ")";
                cv.FilterExpression = filterExpression;
            }
        };
        #endregion

        settings.CardLayoutCreated = (sender, e) =>
        {
            string BusinessId = Session["BuisnessId"].ToString();
            var reasons = home._reason.GetAll(xs => xs.BusinessId == BusinessId).Select(c => new { c.Description }).ToList();
            reason = reasons.Count > 0 ? true : false;
            MVCxCardView cv = sender as MVCxCardView;
            string StyleID = (string)cv.GetCardValues(e.VisibleIndex, "StyleID");
            if (ViewBag.page != null)
            {
                if (ViewBag.page)
                {
                    cv.PageIndex = 0;
                }
            }
            if (e.VisibleIndex >= 0)
            {
                bool value = (bool)cv.GetCardValues(e.VisibleIndex, "isAllocated");
                if (value)
                {

                    //e.Properties.Items[1].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[2].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[3].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[0].ParentContainerStyle.CssClass = "itemToHide";
                    if ((bool)Session["IsManPack"] == true)
                    {
                        e.Properties.Items[6].ParentContainerStyle.CssClass = "itemToHide";
                    }
                    e.Properties.Items[1].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[7].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[4].ParentContainerStyle.CssClass = "itemToHide";
                    e.Properties.Items[5].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[8].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[9].ParentContainerStyle.CssClass = "itemToHide";
                    //e.Properties.Items[10].ParentContainerStyle.CssClass = "itemToHide";
                }
                else
                {

                    if (template.Count == 0)
                    {
                        e.Properties.Items[1].ParentContainerStyle.CssClass = "itemToHide";

                        if (reasons.Count == 0)
                        {
                            //e.Properties.Items[7].ParentContainerStyle.CssClass = "itemToHide";

                        }
                    }
                    else
                    {
                        if (reasons.Count == 0)
                        {
                            //e.Properties.Items[7].ParentContainerStyle.CssClass = "itemToHide";

                        }
                    }

                }
            }
        };

        #endregion

        #region cardview Column defenitions

        settings.Columns.Add(c =>
        {
            c.FieldName = "Entitlement";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add("StyleID");

        settings.Columns.Add(c =>
        {
            c.FieldName = "SizeId";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add("Description");
        settings.Columns.Add(c =>
        {
            c.FieldName = "Price";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "StyleImage";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "Dimensions";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "Caption";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "Quantity";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        settings.Columns.Add(c =>
        {
            c.FieldName = "BasketButton";
            c.Settings.AllowHeaderFilter = DefaultBoolean.False;
            c.Settings.AllowSort = DefaultBoolean.False;
        });
        #endregion

        #region cardviewlayoutproperties defenition
        settings.CardLayoutProperties.ColCount = 1;

        #region styleimage

        var pointsCardtbl = Session["PointsCard"]!=null?(List<Maximus.Data.models.view_totalpointsused>)Session["PointsCard"]:new List<Maximus.Data.models.view_totalpointsused>();
        var pointsStyletbl = Session["PointsStyle"]!=null?(List<Maximus.Data.models.tblaccemp_stylepoints>)Session["PointsStyle"] : new List<Maximus.Data.models.tblaccemp_stylepoints>();
        var pointsUcodetbl = Session["PointsUcode"]!=null?(List<Maximus.Data.models.tblaccemp_ucodepoints>)Session["PointsUcode"]:new List<Maximus.Data.models.tblaccemp_ucodepoints>();
        var pointsAdjustmenttbl = Session["PointsAdjustment"]!=null?(List<Maximus.Data.models.tblaccemp_pointsadjustment>)Session["PointsAdjustment"]:new List<Maximus.Data.models.tblaccemp_pointsadjustment>();

        settings.CardLayoutProperties.Items.Add(i =>
        {
            i.ColumnName = "StyleImage";
            i.ShowCaption = DefaultBoolean.False;
            i.SetTemplateContent(x =>
            {
                var Assembly = Convert.ToInt16(DataBinder.Eval(x.DataItem, "Assembly"));
                var orgstyl = Convert.ToString(DataBinder.Eval(x.DataItem, "OriginalStyleid"));
                string style = DataBinder.Eval(x.DataItem, "StyleID").ToString();
                var styleimg = DataBinder.Eval(x.DataItem, "StyleImage");
                var divImg = "DivImg" + style;
                var content = ""; var contentPts = "";
                string selEMP = Session["SelectedEmp"].ToString();
                string selecetedUcode = Session["SelectedUcode"] != null ? Session["SelectedUcode"].ToString() : "";
                if (Convert.ToBoolean(Session["POINTSREQ"]))
                {
                    if (((Maximus.Data.models.PointsModel)Session["Pointsmodel"]).LstStyles != null)
                    {
                        var data1 = home._fskSetValues.Exists(sas => sas.SettingID.ToUpper().Trim() == "FITDIM_STYLE_DESC" && sas.StyleID.ToLower().Trim() == style.ToLower().Trim()) ? home._fskSetValues.GetAll(sas => sas.SettingID.ToUpper().Trim() == "FITDIM_STYLE_DESC" && sas.StyleID.ToLower().Trim() == style.ToLower().Trim()).First().Value : "";
                        int styPointss =  pointsStyletbl.Exists(sq => sq.UcodeID == selecetedUcode && sq.StyleID == style && sq.BusinessID == businessId) ?  pointsStyletbl.Where(sq => sq.UcodeID == selecetedUcode && sq.StyleID == style && sq.BusinessID == businessId).First().MinPts.Value : 0;
                        int soPoints =  pointsCardtbl.Exists(s => s.StyleID == style && s.EmployeeID == selEMP) ?  Convert.ToInt32 (pointsCardtbl.Where(s => s.StyleID == style && s.EmployeeID == selEMP).Sum(s => s.TOTSOPOINTS).Value) : 0;
                        int minPoints = styPointss > soPoints ? styPointss - soPoints : 0;
                        int orgMinPoints =  pointsStyletbl.Exists(sq => sq.UcodeID == selecetedUcode && sq.StyleID == style && sq.BusinessID == businessId) ?  pointsStyletbl.Where(sq => sq.UcodeID == selecetedUcode && sq.StyleID == style && sq.BusinessID == businessId).First().MinPts.Value : 0;
                        long ptsTaken = 0;
                        if (((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(a => a.EmployeeID == selEMP).First().SalesOrderLine.Count > 0)
                        {
                            ptsTaken = ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(a => a.EmployeeID == selEMP).First().SalesOrderLine.Any(a => a.orgStyleId == style) ? ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(a => a.EmployeeID == selEMP).First().SalesOrderLine.Where(a => a.orgStyleId == style).Sum(a => a.OrdQty) : 0;
                        }
                        contentPts = minPoints > 0 && Convert.ToBoolean(Session["POINTSREQ"].ToString()) ? contentPts + "<div class='row minPtsDiv_" + style + "'><center class='mandatoryStylecart'><span class='mandatoryStyle'>The mandatory quantity is :<b>" + minPoints + "</b></span>&nbsp;&nbsp;&nbsp;The quantity in cart is :<b>" + ptsTaken + "</b></center></div>" : contentPts + "";
                        content = contentPts + content;
                        foreach (var item in ((Maximus.Data.models.PointsModel)Session["Pointsmodel"]).LstStyles)
                        {

                            if (item.Style == style)
                            {
                                content = content + "<div class='row'><center><h4>This style points: " + item.Points + "</h4></center></div>";
                                if (minPoints > 0)
                                {
                                    if (((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Count == 0)
                                    {
                                        ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Add(new Maximus.Data.models.StyleAndMinPoints { OrgStyle = style, MinPoints = minPoints, OrgMinPoints = minPoints, Points = item.Points, Style = style, CatCaption = data1 });

                                    }
                                    else if (((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Any(ss => ss.Style == style) == false)
                                    {

                                        ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Add(new Maximus.Data.models.StyleAndMinPoints { OrgStyle = style, MinPoints = minPoints, OrgMinPoints = minPoints, Points = item.Points, Style = style, CatCaption = data1 });
                                    }
                                }
                            }
                            else if (style.Contains(item.Style)) { content = content + "<div class='row'><center><h4>This style points: " + item.Points + "</h4></center></div>"; break; }
                        }
                    }
                }
                content = content + "<div class='row'>";
                content = string.Format(content + "<div class='col-md-3 pull-left'><div id='" + divImg + "'><img src=\"{0}\" height='70%' width='70%' onclick='Getimage(\"{0}\")' /></div></div>", styleimg);
                ViewContext.Writer.Write(content);

                ViewContext.Writer.Write("<div class='col-md-7'><br/><div class='row'><div class='col-md-12'>");
                if (template.Count > 0)
                {
                    string viewContent = "";
                    if (style.Contains(','))
                    {
                        var styledex = (DataBinder.Eval(x.DataItem, "StyleID")).ToString();
                        var styleArr = style.Split(',');
                        var styleat1 = styleArr[0];
                        //var descritption = string.Format("<div class='row'><div class='col-md-12' style='padding:0px;'><b>Product</b><hr style=\"margin: 0;\"/></br>" + style.ToString().Split('/')[0] + "<span>&nbsp;</span><span>-</span><span class='fonter' id='LbDescription" + styleat1 + "'> {0}</span></div></div>",   home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description != null ?   home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description.ToString() : "");
                        var descritption = string.Format("<div class='row'><div class='col-md-12' style='padding:0px;'><b>Product</b><hr style=\"margin: 0;\"/></br><span>&nbsp;</span><span class='fonter' id='LbDescription" + styleat1 + "'> {0}</span></div></div>", home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description != null ? home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description.ToString() : "");

                        ViewContext.Writer.Write(descritption);
                        ViewContext.Writer.Write("<br/><br/></div>");
                        ViewContext.Writer.Write("<div class='col-md-12'><div class='row'> <b>Fit</b><hr style=\"margin: 0;\"/><br/>");

                        var divContent = "<fieldset class='swatch-picker' name=\"Swatch_Style_FieldSet_" + style + "\">";
                        foreach (string styler in styleArr)
                        {
                            if (Array.IndexOf(styleArr, styler) == 0)
                            {
                                if (styler.Contains('/'))
                                {
                                    divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResulTemplateModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, styler.Contains('/') ? styler.Split('/')[1] : styler, orgstyl);
                                }
                                else
                                {
                                    divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResulTemplateModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, home._fskSetValues.Exists(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP") ? home._fskSetValues.GetAll(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP").First().Value : styler, orgstyl);
                                }
                            }
                            else
                            {
                                if (styler.Contains('/'))
                                {
                                    divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResulTemplateModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, styler.Contains('/') ? styler.Split('/')[1] : styler, orgstyl);
                                }
                                else
                                {
                                    divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio'   id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResulTemplateModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, home._fskSetValues.Exists(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP") ? home._fskSetValues.GetAll(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP").First().Value : styler, orgstyl);
                                }

                            }
                        }


                        divContent = divContent + "</fieldset><br/></div></div>";
                        ViewContext.Writer.Write(divContent);
                    }
                    else
                    {
                        viewContent = string.Format("<div class='row fonter'><div class='col-md-12' style='padding:0px;'><b>Product</b> <span>&nbsp;</span><span id='LbDescription" + orgstyl + "'>{0}</span></div>", home._tblFskStyle.GetAll(s => s.StyleID == orgstyl.ToString()).FirstOrDefault().Description != null | home._tblFskStyle.GetAll(s => s.StyleID == orgstyl.ToString()).FirstOrDefault().Description != "" ? home._tblFskStyle.GetAll(s => s.StyleID == orgstyl.ToString()).FirstOrDefault().Description.ToString() : "");
                        ViewContext.Writer.Write(viewContent);
                    }
                }
                else
                {
                    var orgStyle = (DataBinder.Eval(x.DataItem, "OriginalStyleid")).ToString();
                    var style1 = (DataBinder.Eval(x.DataItem, "StyleID")).ToString();
                    if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                    {
                        if (style1.Contains(','))
                        {
                            var styledex = (DataBinder.Eval(x.DataItem, "StyleID")).ToString();

                            var styleArr = style1.Split(',');
                            var styleat1 = styleArr[0];
                            //var descritption = string.Format("<div class='row'><div class='col-md-12' style='padding:0px;'><b>Product</b><hr style=\"margin: 0;\"/></br>" + style.ToString().Split('/')[0] + "<span>&nbsp;</span><span>-</span><span class='fonter' id='LbDescription" + styleat1 + "'> {0}</span></div></div>",   home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description != null ?   home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description.ToString() : "");
                            var descritption = string.Format("<div class='row'><div class='col-md-12' style='padding:0px;'><b>Product</b><hr style=\"margin: 0;\"/></br><span>&nbsp;</span><span class='fonter' id='LbDescription" + styleat1 + "'> {0}</span></div></div>", home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description != null ? home._tblFskStyle.GetAll(s => s.StyleID == styleat1.ToString()).FirstOrDefault().Description.ToString() : "");

                            ViewContext.Writer.Write(descritption);
                            ViewContext.Writer.Write("<br/><br/></div>");
                            ViewContext.Writer.Write("<div class='col-md-12'><div class='row'> <b>Fit</b><hr style=\"margin: 0;\"/><br/>");

                            var divContent = "<fieldset class='swatch-picker' name=\"Swatch_Style_FieldSet_" + style + "\">";
                            foreach (string styler in styleArr)
                            {
                                if (Array.IndexOf(styleArr, styler) == 0)
                                {
                                    if (styler.Contains('/'))
                                    {
                                        divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResultModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, styler.Contains('/') ? styler.Split('/')[1] : styler, orgstyl);
                                    }
                                    else
                                    {
                                        divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResultModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, home._fskSetValues.Exists(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP") ? home._fskSetValues.GetAll(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP").First().Value : styler, orgstyl);
                                    }
                                }
                                else
                                {
                                    if (styler.Contains('/'))
                                    {
                                        divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResultModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, styler.Contains('/') ? styler.Split('/')[1] : styler, orgstyl);
                                    }
                                    else
                                    {
                                        divContent = divContent + string.Format("<label class='swatchLabel'><input type='radio'   id='radio' name=\"Swatch_Style_" + style + "\" value='{1}' onclick=\"GetDrpResultModelSwatch('{0}','{1}','{3}');\"/><span class='spanner1'><center >{2}</center></span></label>", style, styler, home._fskSetValues.Exists(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP") ? home._fskSetValues.GetAll(ss => ss.StyleID.ToLower() == styler.ToLower() && ss.SettingID == "FITGROUP").First().Value : styler, orgstyl);
                                    }

                                }
                            }
                            divContent = divContent + "</fieldset><br/></div></div>";
                            ViewContext.Writer.Write(divContent);
                        }
                        else
                        {
                            string viewContent = string.Format("<div class='row'><div class='col-md-12'><b>Product</b> <hr style=\"margin: 0;\"/></br><span>" + style + "</span> - <span class='fonter' id='LbDescription" + style + "'> {1}</span></div></div>", style1, home._tblFskStyle.GetAll(s => s.StyleID == style.ToString()).FirstOrDefault().Description != null ? home._tblFskStyle.GetAll(s => s.StyleID == style.ToString()).FirstOrDefault().Description.ToString() : "");
                            ViewContext.Writer.Write(viewContent);
                        }
                    }
                    else
                    {
                        if (style1.Contains(','))
                        {
                            Html.DevExpress().ComboBox(
                                c =>
                                {
                                    var styleArr = style1.Split(',');
                                    c.Properties.Caption = "Style";
                                    c.Name = "styleDrp_" + style + "_" + orgStyle;
                                    foreach (string data in (string[])styleArr)
                                    {
                                        c.Properties.Items.Add(data);

                                    }
                                    c.SelectedIndex = 0;
                                    c.Properties.ClientSideEvents.SelectedIndexChanged = "GetDrpResultModel";
                                }
                                                ).Render();
                        }
                        else
                        {
                            string viewContent = "<div class='row'><div class='col-md-2'><b>Style: &nbsp; &nbsp;</b></div><div class='col-md-4'>" + style + "</div><div class='col-md-2'></div></div>";
                            ViewContext.Writer.Write(viewContent);
                        }
                    }


                }
                if (style.ToString().Contains(','))
                {
                    ViewContext.Writer.Write("</div></div>");
                }
                else
                {
                    ViewContext.Writer.Write("</div></div></div>");
                }


                var content1 = "<div class='col-md-2'><div class='row'>";
                bool value = (bool)(DataBinder.Eval(x.DataItem, "isAllocated"));
                if (Assembly != 0)
                {
                    if (value != true)
                    {
                        if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                        {
                            if (style.ToString().Contains(','))
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 marginer'><center> <img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssemblySwatch('{0}');\"/></center></div>", style);
                            }
                            else
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 marginer'><center> <img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssembly('{0}');\"/></center></div>", style);
                            }
                        }
                        else
                        {
                            if (style.ToString().Contains(','))
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 marginer'><center><img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssembly('{0}');\"/></center></div>", style + "_" + orgstyl);
                            }
                            else
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 marginer'><center><img src='/Content/Images/embroidery.png' title='Get Assembly info' height='40' width='30' onclick=\"getAssembly('{0}');\"/></center></div>", style);
                            }
                        }


                    }
                }
                if (template.Count == 0)
                {
                    if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                    {
                        if (value != true)
                        {
                            if (Convert.ToBoolean(Session["IsBulkOrder1"].ToString()) != true)
                            {
                                content1 = content1 + string.Format("<div class='col-md-6 pull-right' style='margin-top: 14px;'><center><img src='/Content/Images/empHistory.png' style='cursor:pointer;' title='Entitlement and previous history' height='40' width='40' onclick=\"getEntitlementSwatch('{0}','{1}');\"/></center></div>", style, orgstyl);
                            }
                        }
                    }
                    else
                    {
                        if (value != true)
                        {
                            content1 = content1 + string.Format("<div class='col-md-6' style='margin-top: 14px;'><center> <img src='/Content/Images/empHistory.png' title='Entitlement and previous history' height='40' width='40' onclick=\"getEntitlement('{0}','{1}');\"/></center></div>", style, orgstyl);
                        }
                    }
                }
                content1 = content1 + "</div></div>";
                ViewContext.Writer.Write(content1);


                //if (style.ToString().Contains(','))
                //{
                //    ViewContext.Writer.Write("</div></div>");
                //}
                //else
                //{
                //    ViewContext.Writer.Write("</div></div></div>");
                //}


            });
        });
        #endregion

        #region caption
        if (template.Count == 0)
        {
            settings.CardLayoutProperties.Items.Add(x =>
            {
                x.ColumnName = "Caption";
                x.ShowCaption = DefaultBoolean.False;
                x.SetTemplateContent(col =>
                {


                    var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                    string cap = "";
                    string desc = "";
                    if (style.Contains(","))
                    {
                        var styar = style.Split(',');
                        var sty1 = styar[0];
                        cap = home._dimFitCap.GetAll(s => s.StyleId == sty1).FirstOrDefault() == null ? "" : home._dimFitCap.GetAll(s => s.StyleId == sty1).FirstOrDefault().Caption;
                        desc = home._stylesView.GetAll(s => s.StyleID == sty1).FirstOrDefault() == null ? "" : home._stylesView.GetAll(s => s.StyleID == sty1).FirstOrDefault().Description;
                    }
                    else
                    {
                        cap = home._dimFitCap.GetAll(s => s.StyleId == style).FirstOrDefault() == null ? "" : home._dimFitCap.GetAll(s => s.StyleId == style).FirstOrDefault().Caption;
                        desc = home._stylesView.GetAll(s => s.StyleID == style).FirstOrDefault() == null ? "" : home._stylesView.GetAll(s => s.StyleID == style).FirstOrDefault().Description;
                    }
                    if (cap != null && cap != "")
                    {
                        ViewContext.Writer.Write(string.Format("<center>{0}</center>", cap));
                    }
                    else
                    {
                        ViewContext.Writer.Write(string.Format("<center>{0}</center>", desc));
                    }


                });
            });
        }
        #endregion

        #region dimension

        if (template.Count == 0)
        {
            settings.CardLayoutProperties.Items.Add(x =>
            {
                x.ColumnName = "Dimensions";
                x.ShowCaption = DefaultBoolean.False;
                x.SetTemplateContent(col =>
                {
                    var freeText = (string)(DataBinder.Eval(col.DataItem, "Dimensions"));
                    var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                    string appPath = System.Web.HttpContext.Current.Request.MapPath(@"~\");
                    var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                    if (freeText != null && freeText != "")
                    {
                        var svmLst = home._dimension1.GetAll(s => s.FreeText.ToLower() == freeText.ToLower() && s.freetexttype.ToLower().Contains("dim")).Select(s => new Maximus.Data.Models.styleViewmodel { StyleID = s.StyleId, Description = s.Description, StyleImage = s.StyleImage }).ToList();
                        //var svm=entity.styleby_freetextview.Where(s=>s.FreeText==f)
                        var data1 = home._fskSetValues.Exists(sas => sas.SettingID.ToUpper().Trim() == "FITDIM_STYLE_DESC" && sas.StyleID.ToLower().Trim() == orgStyle.ToLower().Trim()) ? home._fskSetValues.GetAll(sas => sas.SettingID.ToUpper().Trim() == "FITDIM_STYLE_DESC" && sas.StyleID.ToLower().Trim() == orgStyle.ToLower().Trim()).First().Value : "";
                        string selecetedUcode = Session["SelectedUcode"].ToString();
                        string selEMP = Session["SelectedEmp"].ToString();
                        int styPointss =  pointsStyletbl.Any(sq => sq.UcodeID == selecetedUcode && sq.StyleID == orgStyle && sq.BusinessID == businessId) ?  pointsStyletbl.Where(sq => sq.UcodeID == selecetedUcode && sq.StyleID == orgStyle && sq.BusinessID == businessId).First().MinPts.Value : 0;
                        var content = "<div class='row'><div class='col-md-11'><div class='row'><center>" + data1 + "</center><hr/>";
                        var contentPts = "";
                        var contentpts1 = "";
                        var svmStyLst = svmLst.Select(s => s.StyleID).ToList();

                        string busId = Session["BuisnessId"].ToString();
                        string ucodeId = Session["selectedUcodes"].ToString();
                        var lstAdj =  pointsAdjustmenttbl.Any(s => s.StyleID != "" && s.BusinessID == busId && s.UcodeID == ucodeId) ?  pointsAdjustmenttbl.Where(s => s.BusinessID == busId && s.UcodeID == ucodeId).Select(s => s.StyleID).Distinct().ToList() : new List<string>();
                        var mapStyleID =  pointsAdjustmenttbl.Any(s => s.MapStyleID != "" && s.BusinessID == busId && s.UcodeID == ucodeId) ?  pointsAdjustmenttbl.Where(s => s.BusinessID == busId && s.UcodeID == ucodeId).Select(s => s.MapStyleID).Distinct().ToList() : new List<string>();
                        var svmLst1 = new List<string>();
                        var fskSty = (List<Maximus.Data.models.tblfsk_style_freetext>)Session["StyleFreeText"];
                        var styByFree = (List<Maximus.Data.models.styleby_freetextview>)Session["StyleByFreetext"];
                        svmLst1.AddRange(svmStyLst);
                        foreach (var fitStyl in svmStyLst)
                        {
                            var hasFit = fskSty.Where(ss => ss.StyleId == fitStyl).Any(ss => ss.FreeTextType == "FITALLOC") ? fskSty.Where(ss => ss.StyleId == fitStyl & ss.FreeTextType == "FITALLOC").First().FreeText : "";
                            if (hasFit != "")
                            {
                                var newStyl = styByFree.Any(ss => ss.FreeText == hasFit) ? styByFree.Where(ss => ss.FreeText == hasFit).First().StyleID : "";
                                if (newStyl != "")
                                {
                                    if (newStyl.Contains(","))
                                    {
                                        foreach (var thisTy in newStyl.Split(','))
                                        {
                                            if (svmLst1.Contains(thisTy) == false)
                                            {
                                                svmLst1.Add(thisTy);
                                            }
                                        }
                                    }
                                }
                            }
                        }


                        //else
                        //{
                        //    if (home.pointsCardtbl.Exists(s => svmLst1.Distinct().Contains(s.StyleID) && s.EmployeeID == selEMP))
                        //    {
                        //        foreach (var styl in home.pointsCardtbl.GetAll(s => svmLst1.Distinct().Contains(s.StyleID) && s.EmployeeID == selEMP))
                        //        {
                        //            soPoints = soPoints + (home.pointsCardtbl.GetAll(s => s.StyleID == styl.StyleID && s.EmployeeID == selEMP).Sum(s => s.SOPoints).Value) / (home.pointsStyletbl.GetAll(s => s.UcodeID == selUcode && s.StyleID == styl.StyleID).First().Points.Value);
                        //        }
                        //    }
                        //}


                        foreach (var svm in svmLst)
                        {
                            if (svm.StyleImage != null)
                            {
                                if (svm.StyleImage.Contains(":"))
                                {
                                    if (System.IO.File.Exists(appPath + svm.StyleImage.Substring(svm.StyleImage.IndexOf(":") + 1, svm.StyleImage.Length - svm.StyleImage.IndexOf(":") - 1)) != true)
                                    {
                                        svm.StyleImage = "/StyleImages/notfound.png";
                                    }
                                    else
                                    {
                                        var data = svm.StyleImage.Substring(svm.StyleImage.IndexOf(":") + 1, svm.StyleImage.Length - svm.StyleImage.IndexOf(":") - 1);
                                        svm.StyleImage = data.Replace("\\", "/");
                                    }
                                }
                                else
                                {
                                    if (System.IO.File.Exists(appPath + svm.StyleImage) != true)
                                    {
                                        svm.StyleImage = "/StyleImages/notfound.png";
                                    }
                                    else
                                    {
                                        svm.StyleImage = svm.StyleImage;
                                    }
                                }
                            }
                            else
                            {
                                svm.StyleImage = "/StyleImages/notfound.png";
                            }
                            long cartPoints = 0;
                            int soPoints = 0, mapPoints = 0;
                            if (Convert.ToBoolean(Session["ISEDITING"]))
                            {
                                cartPoints = ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(s => s.IsEditing).First().SalesOrderLine.Any(s => s.orgStyleId == orgStyle) ? ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(s => s.IsEditing).First().SalesOrderLine.Where(s => s.orgStyleId == orgStyle).Sum(s => s.OrdQty) : 0;
                            }
                            if (Convert.ToBoolean(Session["POINTSREQ"]))
                            {
                                if (((Maximus.Data.models.PointsModel)Session["Pointsmodel"]).LstStyles != null)
                                {

                                    if ( pointsCardtbl.Any(s => svmLst1.Distinct().Contains(s.StyleID) && s.EmployeeID == selEMP))
                                    {
                                        foreach (var styl in  pointsCardtbl.Where(s => svmLst1.Distinct().Contains(s.StyleID) && s.EmployeeID == selEMP).ToList())
                                        {
                                            if (( pointsStyletbl.Any(s => s.UcodeID == selUcode && s.StyleID == styl.StyleID && s.Points>0)))
                                            {
                                                soPoints = soPoints +Convert.ToInt32 ( (pointsCardtbl.Where(s => s.StyleID == styl.StyleID && s.EmployeeID == selEMP).Sum(s =>s.TOTSOPOINTS).Value)) / ( pointsStyletbl.Where(s => s.UcodeID == selUcode && s.StyleID == styl.StyleID).First().Points.Value);

                                            }
                                            else if((pointsStyletbl.Any(s => s.UcodeID == selUcode && s.StyleID == styl.StyleID && s.Points == 0)))
                                            {
                                                if (home._stockCard.Exists(s => svmLst1.Distinct().Contains(s.StyleID) && s.EmployeeID == selEMP))
                                                {
                                                    soPoints = soPoints + home._stockCard.GetAll(s => s.StyleID == styl.StyleID && s.EmployeeID == selEMP).Sum(s => s.SOQty).Value + home._stockCard.GetAll(s => s.StyleID == styl.StyleID && s.EmployeeID == selEMP).Sum(s => s.PickQty).Value + home._stockCard.GetAll(s => s.StyleID == styl.StyleID && s.EmployeeID == selEMP).Sum(s => s.InvQty).Value;
                                                }
                                            }
                                        }
                                    }
                                    if (lstAdj.Contains(orgStyle))
                                    {
                                        if (Convert.ToBoolean(Session["IsEditing"]))
                                        {
                                            mapPoints = mapPoints + Convert.ToInt32(((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(s => s.UCodeId == ucodeId && s.EmployeeID == selEMP).First().SalesOrderLine.Any(s => mapStyleID.Contains(s.StyleID)) ? ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(s => s.UCodeId == ucodeId && s.EmployeeID == selEMP).First().SalesOrderLine.Where(s => mapStyleID.Contains(s.StyleID)).Sum(s => s.OrdQty) : 0);
                                        }
                                        else
                                        {

                                            mapPoints = mapPoints + ( pointsCardtbl.Any(s => mapStyleID.Contains(s.StyleID) && s.EmployeeID == selEMP) ?
                                               Convert.ToInt32(( pointsCardtbl.Where(s => mapStyleID.Contains(s.StyleID) && s.EmployeeID == selEMP).Sum(s => s.TOTSOPOINTS).Value)) / ( pointsStyletbl.Where(s => s.UcodeID == selUcode && mapStyleID.Contains(s.StyleID)).First().Points.Value) : 0);
                                            mapPoints = mapPoints + Convert.ToInt32(((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(s => s.UCodeId == ucodeId && s.EmployeeID == selEMP).First().SalesOrderLine.Any(s => mapStyleID.Contains(s.StyleID)) ? ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(s => s.UCodeId == ucodeId && s.EmployeeID == selEMP).First().SalesOrderLine.Where(s => mapStyleID.Contains(s.StyleID)).Sum(s => s.OrdQty) : 0);
                                        }
                                    }

                                    foreach (var item in ((Maximus.Data.models.PointsModel)Session["Pointsmodel"]).LstStyles)
                                    {
                                        if (item.Style == svm.StyleID)
                                        {

                                            int minPoints = styPointss > soPoints ? (styPointss - mapPoints) - soPoints : 0;
                                            minPoints = styPointss== Convert.ToInt32(cartPoints)? styPointss :  minPoints + Convert.ToInt32(cartPoints);
                                            minPoints = minPoints < 0 ? 0 : minPoints;
                                            var lsts = (List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"];
                                            contentpts1 = contentpts1 + string.Format("<div class='col-md-2'><br/><center><span>Points: " + item.Points + "</span></center><br/><div class='dimAllocdiv'><a style=\"cursor:pointer;\" onclick=\"getCard1('{1}','{3}','" + data1 + "')\"><center><img src='{0}'  style=\"margin:3px;\" height=\"150\" width=\"100\" /><br/>{2}</center></a></div></div>", svm.StyleImage, svm.StyleID, svm.Description, orgStyle);

                                            if (minPoints >= 0)
                                            {
                                                var sssssssss = ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]);
                                                if (((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Count == 0)
                                                {
                                                    ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Add(new Maximus.Data.models.StyleAndMinPoints { OrgStyle = orgStyle, MinPoints = minPoints, OrgMinPoints = minPoints, TruePoints = styPointss, Points = item.Points, Style = svm.StyleID, CatCaption = data1 });
                                                }
                                                else if (((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Any(ss => ss.Style == item.Style))
                                                {
                                                    ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Remove(((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Where(ss => ss.Style == item.Style).First());
                                                    ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Add(new Maximus.Data.models.StyleAndMinPoints { OrgStyle = orgStyle, MinPoints = minPoints, OrgMinPoints = minPoints, TruePoints = styPointss, Points = item.Points, Style = svm.StyleID, CatCaption = data1 });
                                                }
                                                else
                                                {
                                                    ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Add(new Maximus.Data.models.StyleAndMinPoints { OrgStyle = orgStyle, MinPoints = minPoints, OrgMinPoints = minPoints, TruePoints = styPointss, Points = item.Points, Style = svm.StyleID, CatCaption = data1 });
                                                }

                                            }

                                        }
                                    }

                                }
                                else
                                {
                                    content = content + string.Format("<div class='col-md-2'><div class='dimAllocdiv'><a style=\"cursor:pointer;\" onclick=\"getCard1('{1}','{3}')\"><center><img src='{0}'  style=\"margin:3px;\" height=\"150\" width=\"100\" /><br/>{2}</center></a></div></div>", svm.StyleImage, svm.StyleID, svm.Description, orgStyle);
                                }
                            }
                            else
                            {
                                content = content + string.Format("<div class='col-md-2'><div class='dimAllocdiv'><a style=\"cursor:pointer;\" onclick=\"getCard1('{1}','{3}')\"><center><img src='{0}'  style=\"margin:3px;\" height=\"150\" width=\"100\" /><br/>{2}</center></a></div></div>", svm.StyleImage, svm.StyleID, svm.Description, orgStyle);
                            }

                        }

                        int minPts1 = ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Any(t => t.OrgStyle == orgStyle) ? ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Where(t => t.OrgStyle == orgStyle).Min(t => t.MinPoints) : 0;
                        int truMinpTs = ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Any(t => t.OrgStyle == orgStyle) ? ((List<Maximus.Data.models.StyleAndMinPoints>)Session["StyleMinPoints"]).Where(t => t.OrgStyle == orgStyle).Min(t => t.TruePoints) : 0;
                        long ptsTaken = 0;
                        if (((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(a => a.EmployeeID == selEMP).First().SalesOrderLine.Count > 0)
                        {
                            ptsTaken = ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(a => a.EmployeeID == selEMP).First().SalesOrderLine.Any(a => a.orgStyleId == orgStyle) ? ((List<Maximus.Data.Models.SalesOrderHeaderViewModel>)Session["SalesOrderHeader"]).Where(a => a.EmployeeID == selEMP).First().SalesOrderLine.Where(a => a.orgStyleId == orgStyle).Sum(a => a.OrdQty) : 0;
                        }
                        if (minPts1 > 0 && Convert.ToBoolean(Session["POINTSREQ"].ToString()))
                        {
                            contentPts = contentPts + "<div class='row minPtsDiv_" + orgStyle + "'><center class='mandatoryStylecart'><span class='mandatoryStyle'>The mandatory quantity is :" + minPts1 + "</span>&nbsp;&nbsp;&nbsp;The quantity in cart is :" + ptsTaken + "</center></div>";
                        }
                        else if (minPts1 == 0 && truMinpTs > 0)
                        {
                            contentPts = contentPts + "<div class='row minPtsDiv_" + orgStyle + "' style='visibility:hidden;'><center class='mandatoryStylecart'><span class='mandatoryStyle'>The mandatory quantity is :<b>" + minPts1 + "</b></span>&nbsp;&nbsp;&nbsp;The quantity in cart is :<b>" + ptsTaken + "</b></center></div>";

                        }
                        content = content + contentPts + contentpts1 + "</div></div><div class='col-md-1'>" + string.Format("<div style='margin-top: 14px;'><center> <img src='/Content/Images/empHistory.png' title='Entitlement and previous history' height='40' width='40' onclick=\"getEntitlementDIMENSION('{0}','{1}');\"/></center></div>", style, orgStyle) + "</div></div>";
                        //Maximus.Data.Models.DataProcessing data = new Maximus.Data.Models.DataProcessing();

                        //var svmLst = entity.ucodeby_freetextview.Where(ss => ss.DimFreeText == freeText).Select(ss => new Maximus.Data.Models.styleViewmodel { StyleID = ss.StyleID, OriginalStyleid = ss.StyleID, StyleImage = ss.StyleImage, Freetext = freeText, ProductGroup = ss.Product_Group.Value }).Distinct().ToList(); /*data.getFreeTextStyles(freeText, Session["SelectedEmp"].ToString(), Session["BuisnessId"].ToString());*/
                        //var content = "<div class='row'>";
                        //var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                        //foreach (var svm in svmLst)
                        //{
                        //    var dex =   home._tblFskStyle.Exists(sa => sa.StyleID == svm.StyleID) ?   home._tblFskStyle.GetAll(sa => sa.StyleID == svm.StyleID).First().Description : svm.StyleID;
                        //    content = content + string.Format("<div class='col-md-2'><div class='dimAllocdiv'><a style=\"cursor:pointer;\" onclick=\"getCard1('{1}','{3}')\"><center><img src='{0}'  style=\"margin:3px;\" height=\"150\" width=\"100\" /><br/>{2}</center></a></div></div>", "/"+svm.StyleImage, svm.StyleID, dex,orgStyle);
                        //}
                        //content = content + "</div>";
                        //var style = entity.ucodeby_freetextview.Where(ss => ss.DimFreeText == freeText).First().StyleID;
                        //var dex =   home._tblFskStyle.GetAll(xsa => xsa.StyleID.Trim().ToLower() == style.Trim().ToLower()).First().Description;
                        //string content = "";
                        ////content = "<center>" + dex + "</center>";
                        //var content1 = string.Format("<a onclick='getDimAlloc(\"{0}\");'>" + dex+"</a>", freeText);
                        //ViewContext.Writer.Write(string.Format("<center>{0}</center>", content1));
                        ViewContext.Writer.Write(content);
                        //var content = string.Format("<a onclick='getDimAlloc(\"{0}\");'>Click here to see Products</a>", freeText);
                        //ViewContext.Writer.Write(string.Format("<center>{0}</center>", content));
                        //settings.ClientSideEvents.CardClick = "function getDim(){getDimAlloc('" + freeText + "')}";
                    }
                });
            });
        }
        #endregion

        #region color
        var firstColor = "";
        var ucodeColorcnt = 0;
        settings.CardLayoutProperties.Items.Add(x =>
        {
            x.ColumnName = "ColourId";
            x.ShowCaption = DefaultBoolean.False;
            x.SetTemplateContent(col =>
            {
                if (template.Count > 0)
                {
                    var style1 = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                    var style = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                    var selTemplates = (List<string>)Session["SelectedTemplates"];
                    var colorLst = home._customerOrderTemplate.GetAll(clr => template.Contains(clr.Template) && clr.Style == style && clr.BusinessID == businessId).Distinct().Select(clr => clr.Colour).Distinct().ToList();
                    List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style);
                    if (Session["ColorSizestyle"].ToString() != "SWATCHES")
                    {
                        Html.DevExpress().ComboBox(
                        c =>
                        {
                            c.Name = "Color_Template_" + style;
                            foreach (var item in lstC)
                            {
                                if (home._customerOrderTemplate.Exists(t => t.Style == style && selTemplates.Contains(t.Template) && t.Colour == item.ColorId))
                                {
                                    c.Properties.Items.Add(item.ColorId);
                                }
                            }
                            if (c.Properties.Items.Count == 1)
                            {
                                c.SelectedIndex = 0; c.Enabled = true;
                            }
                        }).GetHtml();
                    }
                    else
                    {
                        var content = "<b>Colour<b><hr style='margin: 0;'/><br/>"; content = content + "<fieldset class='swatch-picker' name=\"Swatch_ColorTemplate_FieldSet_" + style1 + "\">";
                        if (lstC != null)
                        {
                            if (colorLst.Count > 1)
                            {

                                foreach (var datItem in colorLst)
                                {
                                    var hexcode = home._fskColor.Exists(da => da.Description.Contains(datItem)) ? home._fskColor.GetAll(da => da.Description.Contains(datItem)).First().Colour_hexcode : "";
                                    if (lstC.Where(xa => xa.ObsoleteCode == 0).Select(xsa => xsa.ColorId).ToList().Contains(datItem))
                                    {
                                        if (datItem.ToLower().Contains("yell") | datItem.ToLower().Contains("whit"))
                                        {
                                            if (home._customerOrderTemplate.Exists(t => t.Style == style && selTemplates.Contains(t.Template) && t.Colour == datItem))
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio' id='radio' onchange=\"GetClrImg('{0}-{1}')\" name=\"Swatch_ColorTemplate_" + style1 + "\" value='blue'/><span class='spanner1'><center >{1}</center></span></label>", style, datItem);
                                            }
                                        }
                                        else
                                        {
                                            if (home._customerOrderTemplate.Exists(t => t.Style == style && selTemplates.Contains(t.Template) && t.Colour == datItem))
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio' onchange=\"GetClrImg('{0}-{1}')\"  id='radio' name=\"Swatch_ColorTemplate_" + style1 + "\" value='blue'/><span class='spanner1'><center >{1}</center></span></label>", style, datItem);
                                            }
                                        }

                                    }

                                }
                            }
                            else if (colorLst.Count == 1)
                            {
                                if (lstC.Where(xa => xa.ObsoleteCode == 0).Select(xsa => xsa.ColorId).ToList().Contains(colorLst[0]))
                                {
                                    content = content + string.Format("<label class='swatchLabel'><input type='radio' onchange=\"GetClrImg('{0}-{1}')\" checked  id='radio' name=\"Swatch_ColorTemplate_" + style1 + "\" value='blue'/><span class='spanner1'><center >{1}</center></span></label>", style, colorLst[0]);
                                }
                            }
                        }
                        content = content + "</fieldset><br/>";
                        ViewContext.Writer.Write(content);
                    }
                }
                else
                {
                    var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                    var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                    var ucodeColor = home._ucodes.Exists(uc => uc.UCodeID == selUcode & uc.StyleID == orgStyle) ? home._ucodes.GetAll(uc => uc.UCodeID == selUcode & uc.StyleID == orgStyle).First().ColourID : "";
                    ucodeColorcnt = ucodeColor.Count();
                    if (Session["ColorSizestyle"].ToString() != "SWATCHES")
                    {
                        if (style.Contains(','))
                        {
                            Html.DevExpress().ComboBox(
                                    c =>
                                    {
                                        var styleArr = style.Split(',');
                                        string style1 = styleArr[0].ToString();
                                        c.Name = "Color_" + "Drop_" + style;
                                        List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style1);
                                        if (lstC != null)
                                        {
                                            foreach (var dr in lstC.Where(dts => dts.ObsoleteCode == 0).ToList())
                                            {
                                                if (Convert.ToInt16(dr.ObsoleteCode.ToString()) == 0)
                                                {
                                                    if (dr.ColorId.ToString().ToUpper().Trim() == ucodeColor.ToUpper().Trim())
                                                    {
                                                        c.Properties.Items.Add(dr.ColorId.ToString());
                                                    }
                                                }
                                            }
                                            if (c.Properties.Items.Count == 1)
                                            { c.SelectedIndex = 0; c.Enabled = true; }
                                            c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedColor";
                                        }
                                        else
                                        {
                                            c.Enabled = false;
                                        }
                                        firstColor = c.Properties.Items.Count > 0 ? c.Properties.Items[0].ToString() == "" || c.Properties.Items[0].ToString() == null ? "" : c.Properties.Items[0].ToString() : "";
                                    }
                                                    ).Render();
                        }
                        else
                        {
                            Html.DevExpress().ComboBox(
                                    c =>
                                    {
                                        c.Name = "Color_" + "Drop_" + style;
                                        List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style);
                                        if (lstC != null)
                                        {
                                            foreach (var dr in lstC.Where(dts => dts.ObsoleteCode == 0).ToList())
                                            {
                                                if (Convert.ToInt16(dr.ObsoleteCode.ToString()) == 0)
                                                {
                                                    if (dr.ColorId.ToString().ToUpper().Trim() == ucodeColor.ToUpper().Trim())
                                                    {
                                                        c.Properties.Items.Add(dr.ColorId.ToString());
                                                    }
                                                }
                                            }
                                            if (c.Properties.Items.Count == 1)
                                            { c.SelectedIndex = 0; c.Enabled = true; }
                                            c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedColor";
                                        }
                                        else
                                        {
                                            c.Enabled = false;
                                        }
                                        firstColor = c.Properties.Items.Count > 0 ? c.Properties.Items[0].ToString() == "" || c.Properties.Items[0].ToString() == null ? "" : c.Properties.Items[0].ToString() : "";
                                    }

                                                        ).Render();
                        }
                    }
                    else
                    {
                        if (style.Contains(','))
                        {
                            var ucodeColor1 = home._ucodes.GetAll(uc => uc.UCodeID == selUcode & uc.StyleID == orgStyle).Select(uc => uc.ColourID).ToList();
                            ucodeColorcnt = ucodeColor.Count();
                            var content = "<b>Colour<b><hr style='margin: 0;'/><br/>"; content = content + "<fieldset class='swatch-picker' name=\"Swatch_Color_FieldSet_" + style + "\">";
                            var styleArr = style.Split(',');
                            string style1 = styleArr[0].ToString();
                            List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style1);
                            if (lstC != null)
                            {
                                if (lstC.Where(dts => dts.ObsoleteCode == 0).Count() > 1)
                                {
                                    foreach (var dr in lstC.Where(s=>s.ObsoleteCode==0).ToList())
                                    {
                                        //if (ucodeColor1.IndexOf(dr) == 0)
                                        //{
                                        firstColor = dr.ColorId.ToString();
                                        //}
                                        if (lstC.Where(dts => dts.ObsoleteCode == 0).Select(xs => xs.ColorId).ToList().Contains(dr.ColorId.ToString()))
                                        {
                                            //if (ucodeColor.ToUpper().Trim() == dr.ColorId.ToString().ToUpper().Trim())
                                            //{
                                            var color = dr.ColorId.ToString();
                                            var hexcode = home._fskColor.Exists(da => da.Description.Contains(color)) ? home._fskColor.GetAll(da => da.Description.Contains(color)).First().Colour_hexcode : "";
                                            if (color.ToLower().Contains("whit") | color.ToLower().Contains("yell"))
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio' onchange=\"GetClrImg('{0}-{1}')\"  id='radio' name=\"swatch_Color_" + style + "\" value='blue'/><span class='spanner1'><center >{1}</center></span></label>", style, color);
                                            }
                                            else
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  onchange=\"GetClrImg('{0}-{1}')\"   id='radio' name=\"swatch_Color_" + style + "\" value='blue'/><span class='spanner1'><center >{1}</center></span></label>", style, color);

                                            }

                                            //}
                                        }

                                    }
                                }
                                else if (lstC.Count == 1)
                                {
                                    if (lstC.Where(dts => dts.ObsoleteCode == 0).Count()==1)
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio' checked onchange=\"GetClrImg('{0}-{1}')\" id='radio'  name=\"swatch_Color_" + style + "\" value='blue'  /><span class='spanner1'><center >{1}</center></span></label>", style, lstC[0].ColorId);
                                    }
                                    firstColor = lstC[0].ColorId;

                                }
                                else if (lstC.Where(dts => dts.ObsoleteCode == 0).Count() == 1)
                                {
                                    content = content + string.Format("<label class='swatchLabel'><input type='radio' checked onchange=\"GetClrImg('{0}-{1}')\" id='radio'  name=\"swatch_Color_" + style + "\" value='blue'  /><span class='spanner1'><center >{1}</center></span></label>", style, lstC[0].ColorId);
                                    firstColor = lstC[0].ColorId;
                                }
                            }
                            content = content + "</fieldset><br/>";
                            ViewContext.Writer.Write(content);
                        }
                        else
                        {
                            var content = "<b>Colour<b><hr style='margin: 0;'/><br/>"; content = content + "<fieldset class='swatch-picker' name=\"Swatch_Color_FieldSet_" + style + "\">";
                            List<Maximus.Data.Models.ObsoleteColor> lstC = hc.getColors(style);
                            var ucodeColor1 = home._ucodes.GetAll(uc => uc.UCodeID == selUcode & uc.StyleID == orgStyle).Select(uc => uc.ColourID).ToList();
                            ucodeColorcnt = ucodeColor1.Count();
                            if (lstC != null)
                            {
                                if (lstC.Where(dts => dts.ObsoleteCode == 0).Count() > 1 )
                                {
                                    foreach (var dr in lstC.Where(ss=>ss.ObsoleteCode==0).ToList())
                                    {

                                        if (lstC.Where(dts => dts.ObsoleteCode == 0).Select(xs => xs.ColorId).ToList().Contains(dr.ColorId))
                                        {

                                            var color = dr.ToString();
                                            var hexcode = home._fskColor.Exists(da => da.Description.Contains(color)) ? home._fskColor.GetAll(da => da.Description.Contains(color)).First().Colour_hexcode : "";
                                            if (dr.ToString().ToLower().Contains("yell") | dr.ToString().ToLower().Contains("whit"))
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio' onchange=\"GetClrImg('{0}-{1}')\" id='radio' style='color:red'  name=\"swatch_Color_" + style + "\" value='blue'  /><span class='spanner1'><center >{1}</center></span></label>", style, dr.ToString());
                                            }
                                            else
                                            {
                                                content = content + string.Format("<label class='swatchLabel'><input type='radio' onchange=\"GetClrImg('{0}-{1}')\" id='radio'  name=\"swatch_Color_" + style + "\" value='blue'  /><span class='spanner1'><center >{1}</center></span></label>", style, dr.ToString());

                                            }

                                            firstColor = dr.ColorId.ToString();

                                        }
                                    }
                                }
                                else if (lstC.Count == 1)
                                {
                                    if (lstC.Where(dts => dts.ObsoleteCode == 0).ToList().Count()==1)
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio' checked onchange=\"GetClrImg('{0}-{1}')\" id='radio'  name=\"swatch_Color_" + style + "\" value='blue'  /><span class='spanner1'><center >{1}</center></span></label>", style, lstC[0].ColorId);
                                    }
                                    firstColor = lstC[0].ColorId;
                                }
                                else if (lstC.Where(dts => dts.ObsoleteCode == 0).Count() == 1)
                                {
                                    content = content + string.Format("<label class='swatchLabel'><input type='radio' checked onchange=\"GetClrImg('{0}-{1}')\" id='radio'  name=\"swatch_Color_" + style + "\" value='blue'  /><span class='spanner1'><center >{1}</center></span></label>", style, lstC[0].ColorId);
                                    firstColor = lstC[0].ColorId;
                                }

                            }


                            content = content + "</fieldset><br/>";
                            ViewContext.Writer.Write(content);
                        }
                    }
                }
            });

        });



        #endregion
        Maximus.Data.Models.DataProcessing dp = new Maximus.Data.Models.DataProcessing(_unitOfWork);
        #region size
        settings.CardLayoutProperties.Items.Add(x =>
        {
            x.ColumnName = "SizeId";
            x.ShowCaption = DefaultBoolean.False;
            x.SetTemplateContent(col =>
            {
                var reqDta = DataBinder.Eval(col.DataItem, "ReqData") != null ? (DataBinder.Eval(col.DataItem, "ReqData")).ToString() : "";
                if (template.Count > 0)
                {
                    var style = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                    var style1 = (DataBinder.Eval(col.DataItem, "StyleId")).ToString();
                    var sizStyl = style1.Contains(",") ? style1.Split(',')[0] : style1;
                    var sizeLst = home._customerOrderTemplate.GetAll(siz => template.Contains(siz.Template) && siz.BusinessID == businessId && siz.Style == sizStyl).Select(siz => siz.SizeiD).Distinct().ToList();
                    if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                    {
                        var content = "<b>Sizes<b><hr style='margin: 0;'/><br/>"; content = content + "<fieldset class='swatch-picker' name=\"Swatch_Size_FieldSet_" + style1 + "\">";

                        if (sizeLst != null)
                        {
                            if ((bool)Session["IsBulkOrder1"] == true)
                            {
                                if (sizeLst.Count > 2)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div>  <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><br /><hr />";
                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div> <br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div> <br /><hr />";
                                        }
                                    }
                                }
                                else if (sizeLst.Count == 2)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-6' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div> <div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div> <div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><br /><hr />";
                                        }
                                    }
                                }
                                else if (sizeLst.Count == 2)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>. </center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>. </center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";

                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>. </center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>. </center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>. </center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center></div></div></div><br /><hr />";
                                        }

                                    }
                                }
                                foreach (var data in sizeLst)
                                {
                                    var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString().ToLower() == "hide")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "'  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + data + "</center></div><div class='col-md-6'><center><input type =\"number\" placeholder='Quantity' id='" + style1 + "_" + data + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString().ToLower() == "readonly")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "'  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style1 + "_" + data + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }
                                        else if (Session["Price"].ToString().ToLower() == "readwrite")
                                        {
                                            content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "'  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_template_Price" + style + "' value='" + dp.GetPrice(style, data, Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style1 + "_" + data + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                        }

                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString().ToLower() == "hide")
                                        {
                                            if (style.Contains(","))
                                            {
                                                if (style.Split(',')[0] == orgStyle)
                                                {
                                                    content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style1 + "_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                }
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + data + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style1 + "_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                            }

                                        }
                                        else if (Session["Price"].ToString().ToLower() == "readonly")
                                        {
                                            if (style.Contains(","))
                                            {
                                                if (style.Split(',')[0] == orgStyle)
                                                {
                                                    content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style1 + "_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                }
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + data + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, data, Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style1 + "_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                            }

                                        }
                                        else if (Session["Price"].ToString().ToLower() == "readwrite")
                                        {
                                            if (style.Contains(","))
                                            {
                                                if (style.Split(',')[0] == orgStyle)
                                                {
                                                    content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + data + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_template_Price" + style + "' value='" + dp.GetPrice(style, data, Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style1 + "_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                }
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4 BulkOrder1_template_" + style1 + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + data + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_template_Price" + style + "' value='" + dp.GetPrice(style, data, Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style1 + "_" + data + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + data + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                            }

                                        }

                                    }


                                }
                            }
                            else if ((bool)Session["IsBulkOrder"] == true)
                            {
                                foreach (var dataItem in sizeLst)
                                {
                                    if (sizeLst.Count > 1)
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'    id='radio' name=\"swatchTemplate_Size_" + style1 + "\" value='blue' /><span class='spanner1'  onclick=\"getSelectedSizeTemplateSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style1, dataItem);
                                    }
                                    else
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"swatchTemplate_Size_" + style1 + "\" value='blue'   checked /><span class='spanner1'  onclick=\"getSelectedSizeTemplateSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style1, dataItem);
                                    }
                                }
                            }
                            else
                            {
                                foreach (var dataItem in sizeLst)
                                {
                                    if (sizeLst.Count > 1)
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'    id='radio' name=\"swatchTemplate_Size_" + style1 + "\" value='blue' /><span class='spanner1'  onclick=\"getSelectedSizeTemplateSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style1, dataItem);
                                    }
                                    else
                                    {
                                        content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"swatchTemplate_Size_" + style1 + "\" value='blue'   checked /><span class='spanner1'  onclick=\"getSelectedSizeTemplateSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style1, dataItem);
                                    }
                                }
                            }

                        }
                        content = content + "</fieldset><br/>";
                        ViewContext.Writer.Write(content);

                    }
                    else
                    {
                        Html.DevExpress().ComboBox(c =>
                        {
                            c.Name = "Size_Template_" + style;
                            c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedTemplateSize";
                            foreach (var items in sizeLst)
                            {
                                c.Properties.Items.Add(items);
                            }
                            if (c.Properties.Items.Count == 1)
                            {
                                c.SelectedIndex = 0; c.Enabled = true;
                            }
                        }).GetHtml();
                    }

                }
                else
                {
                    var orgStyle = (DataBinder.Eval(col.DataItem, "OriginalStyleid")).ToString();
                    var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                    Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(col.DataItem, "HasPreviousSize"));
                    var styleArr = style.Split(',');
                    string style1 = styleArr[0].ToString();
                    //  c.Name = "Size_" + "Drop_" + style;
                    System.Data.DataTable lstC = firstColor == "" ? hc.getSizes(style1) : hc.getColorSizes(style1);
                    if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                    {
                        if (style.Contains(','))
                        {
                            var content = "";
                            content = content + "<b>Sizes<b><hr style='margin: 0;'/><br/>";
                            content = content + "<fieldset class='swatch-picker' name=\"Swatch_Size_FieldSet_" + style + "\">";
                            if ((bool)Session["IsBulkOrder1"] == true)
                            {
                                if (lstC.Rows.Count > 2)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div>  <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><br /><hr />";
                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div> <br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div> <br /><hr />";
                                        }
                                    }
                                }
                                else if (lstC.Rows.Count == 2)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-6' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div> <div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div> <div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><br /><hr />";
                                        }
                                    }
                                }
                                else if (lstC.Rows.Count == 1)
                                {
                                    if (reqDta == "")
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>. </center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>. </center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";

                                        }
                                    }
                                    else
                                    {
                                        if (Session["Price"].ToString() == "hide")
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>. </center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>. </center></div></div></div><br /><hr />";
                                        }
                                        else
                                        {
                                            content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>. </center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center></div></div></div><br /><hr />";
                                        }

                                    }
                                }

                            }
                            if (lstC != null)
                            {

                                foreach (System.Data.DataRow dr in lstC.Rows)
                                {
                                    if (lstC.Rows.Count > 1)
                                    {
                                        if ((bool)Session["IsManPack"] == false && (bool)Session["IsBulkOrder1"] == false)
                                        {

                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString().ToUpper().Trim() == firstColor.ToUpper().Trim())
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (reqDta == "")
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (reqDta == "")
                                                    {
                                                        content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                    }
                                                    else
                                                    {
                                                        content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                    }

                                                }
                                            }
                                        }
                                        else if ((bool)Session["IsBulkOrder1"] == true)
                                        {

                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString().ToUpper().Trim() == firstColor.ToUpper().Trim())
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (reqDta == "")
                                                        {
                                                            if (Session["Price"].ToString().ToLower() == "hide")
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "'  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-6'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }
                                                            else if (Session["Price"].ToString().ToLower() == "readonly")
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "'  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }
                                                            else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "'  style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }

                                                        }
                                                        else
                                                        {
                                                            if (Session["Price"].ToString().ToLower() == "hide")
                                                            {
                                                                if (style.Contains(","))
                                                                {
                                                                    if (style.Split(',')[0] == orgStyle)
                                                                    {
                                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                }

                                                            }
                                                            else if (Session["Price"].ToString().ToLower() == "readonly")
                                                            {
                                                                if (style.Contains(","))
                                                                {
                                                                    if (style.Split(',')[0] == orgStyle)
                                                                    {
                                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";

                                                                }

                                                            }
                                                            else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                            {
                                                                if (style.Contains(","))
                                                                {
                                                                    if (style.Split(',')[0] == orgStyle)
                                                                    {
                                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                }

                                                            }

                                                        }
                                                        //content = content + string.Format("<div  class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\"  onblur=\"GetBulkPrice('{0}','{1}','{2}')\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div  style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (reqDta == "")
                                                    {
                                                        if (Session["Price"].ToString().ToLower() == "hide")
                                                        {
                                                            content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-6'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                        }
                                                        else if (Session["Price"].ToString().ToLower() == "readonly")
                                                        {
                                                            content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                        }
                                                        else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                        {
                                                            content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (Session["Price"].ToString().ToLower() == "hide")
                                                        {
                                                            if (style.Contains(","))
                                                            {
                                                                if (style.Split(',')[0] == orgStyle)
                                                                {
                                                                    content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" placeholder='" + reqDta + "'  id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                }
                                                            }
                                                            else
                                                            {
                                                                content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" placeholder='" + reqDta + "'  id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }

                                                        }
                                                        else if (Session["Price"].ToString().ToLower() == "readonly")
                                                        {
                                                            if (style.Contains(","))
                                                            {
                                                                if (style.Split(',')[0] == orgStyle)
                                                                {
                                                                    content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" placeholder='" + reqDta + "'  id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                }
                                                            }
                                                            else
                                                            {
                                                                content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" placeholder='" + reqDta + "'  id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }

                                                        }
                                                        else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                        {
                                                            if (style.Contains(","))
                                                            {
                                                                if (style.Split(',')[0] == orgStyle)
                                                                {
                                                                    content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" placeholder='" + reqDta + "'  id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                                }
                                                            }
                                                            else
                                                            {
                                                                content = content + "<div class='col-md-4' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" placeholder='" + reqDta + "'  id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }

                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString().ToUpper().Trim() == firstColor.ToUpper().Trim())
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString().Trim())
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString(), orgStyle);
                                                        }
                                                        else
                                                        {
                                                            if (ucodeColorcnt > 1)
                                                            {
                                                                content = content + string.Format("<label class='swatchLabel'><input  type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString(), orgStyle);
                                                            }
                                                            else
                                                            {
                                                                content = content + string.Format("<label class='swatchLabel'><input checked type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString(), orgStyle);
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString().Trim())
                                                    {
                                                        content = content + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString(), orgStyle);
                                                    }
                                                    else
                                                    {
                                                        if (ucodeColorcnt > 1)
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input  type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center>{1}</center></span></label>", style, dr.ItemArray[2].ToString(), orgStyle);
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input checked type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString(), orgStyle);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if ((bool)Session["IsManPack"] == false && (bool)Session["IsBulkOrder1"] == false)
                                        {
                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString().ToUpper().Trim() == firstColor.ToUpper().Trim())
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (reqDta == "")
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (reqDta == "")
                                                    {

                                                        content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                    }
                                                    else
                                                    {

                                                        content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                    }
                                                }
                                            }
                                        }
                                        else if ((bool)Session["IsBulkOrder1"] == true)
                                        {
                                            if (dr.ItemArray[1].ToString().ToUpper().Trim() == firstColor.ToUpper().Trim())
                                            {
                                                if (reqDta == "")
                                                {
                                                    if (Session["Price"].ToString().ToLower() == "hide")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-6'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readonly")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }

                                                }
                                                else
                                                {
                                                    if (Session["Price"].ToString().ToLower() == "hide")
                                                    {

                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\" placeholder='" + reqDta + "'   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readonly")
                                                    {

                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" placeholder='" + reqDta + "'   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                    {

                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity'  min=\"0\" id='" + style + "_" + dr.ItemArray[3].ToString() + "'   class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\" placeholder='" + reqDta + "'   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }

                                                }
                                            }

                                        }
                                        else
                                        {
                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString().ToUpper().Trim() == firstColor.ToUpper().Trim())
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString().Trim())
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"swatch_Size_" + style + "\" value='blue'  checked/><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                        }
                                                        else
                                                        {
                                                            if (ucodeColorcnt > 1)
                                                            {
                                                                content = content + string.Format("<label class='swatchLabel'><input type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue'/><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                            }
                                                            else
                                                            {
                                                                content = content + string.Format("<label class='swatchLabel'><input type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue'  checked/><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                            }

                                                        }

                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString().Trim())
                                                    {
                                                        content = content + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"swatch_Size_" + style + "\" value='blue'  checked/><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                    }
                                                    else
                                                    {
                                                        if (ucodeColorcnt > 1)
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'   id='radio' name=\"swatch_Size_" + style + "\" value='blue'  /><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'   id='radio' name=\"swatch_Size_" + style + "\" value='blue'  checked/><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}','{2}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                        }

                                                    }

                                                }
                                            }
                                        }
                                    }

                                }
                            }

                            content = content + "</fieldset><br/>";
                            ViewContext.Writer.Write(content);
                        }
                        else
                        {
                            if (lstC != null)
                            {
                                var content = "<b>Sizes<b><hr style='margin: 0;'/><br/>"; content = content + "<fieldset class='swatch-picker' name=\"Swatch_Size_FieldSet_" + style + "\">";
                                if ((bool)Session["IsBulkOrder1"] == true)
                                {
                                    if (lstC.Rows.Count > 2)
                                    {
                                        if (reqDta == "")
                                        {
                                            if (Session["Price"].ToString() == "hide")
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>. </center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><br /><hr />";
                                            }
                                        }
                                        else
                                        {
                                            if (Session["Price"].ToString() == "hide")
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div> <br /><hr />";
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div> <br /><hr />";
                                            }
                                        }
                                    }
                                    else if (lstC.Rows.Count == 2)
                                    {
                                        if (reqDta == "")
                                        {
                                            if (Session["Price"].ToString() == "hide")
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-6' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div> <div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center> </div><div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                            }
                                        }
                                        else
                                        {
                                            if (Session["Price"].ToString() == "hide")
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div> <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div> <div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center> </div><div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><br /><hr />";
                                            }
                                        }
                                    }
                                    else if (lstC.Rows.Count == 1)
                                    {
                                        if (reqDta == "")
                                        {
                                            if (Session["Price"].ToString() == "hide")
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>Size</center></div> <div class='col-md-6'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>. </center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-6'><center>.</center></div><div class='col-md-6'><center>.</center> </div><div class='col-md-6'><center>.</center></div></div></div><br /><hr />";
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div><div class='col-md-4'><center>Price</center></div> <div class='col-md-4'><center>Quantity</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>. </center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div></div></div><br /><hr />";

                                            }

                                        }
                                        else
                                        {
                                            if (Session["Price"].ToString() == "hide")
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-4'><center>Size</center></div>  <div class='col-md-4'><center>Quantity</center></div><div class='col-md-4'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>. </center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'> <div class='col-md-4'><center>.</center> </div><div class='col-md-4'><center>.</center></div><div class='col-md-4'><center>. </center></div></div></div><br /><hr />";
                                            }
                                            else
                                            {
                                                content = content + "<div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>Size</center></div><div class='col-md-3'><center>Price</center></div> <div class='col-md-3'><center>Quantity</center></div><div class='col-md-3'><center>ReqData</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>.</center></div></div></div><div class='col-md-4' style='margin-bottom:15px;'><div class='row'><div class='col-md-3'><center>. </center></div><div class='col-md-3'><center>.</center> </div><div class='col-md-3'><center>.</center></div><div class='col-md-3'><center>. </center></div></div></div><br /><hr />";
                                            }

                                        }
                                    }

                                }
                                foreach (System.Data.DataRow dr in lstC.Rows)
                                {
                                    if (lstC.Rows.Count > 1)
                                    {
                                        if ((bool)Session["IsManPack"] == false && (bool)Session["IsBulkOrder1"] == false)
                                        {
                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString() == firstColor)
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString())
                                                        {
                                                            if (reqDta == "")
                                                            {
                                                                content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                            }
                                                            else
                                                            {
                                                                content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                            }

                                                        }
                                                        else
                                                        {
                                                            if (reqDta == "")
                                                            {
                                                                content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                            }
                                                            else
                                                            {

                                                                content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (prevHistory.Size.Trim() == dr.ItemArray[2].ToString())
                                                    {
                                                        if (reqDta == "")
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (reqDta == "")
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else if ((bool)Session["IsBulkOrder1"] == true)
                                        {
                                            if (dr.ItemArray[1].ToString() == firstColor)
                                            {
                                                if (reqDta == "")
                                                {
                                                    if (Session["Price"].ToString().ToLower() == "hide")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-6'><center><input type =\"number\"  id='" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readonly")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\"  id='" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";

                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-4'><center><input type =\"number\"  id='" + style + "_" + dr.ItemArray[3].ToString() + "' placeholder='Quantity'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }

                                                }
                                                else
                                                {

                                                    if (Session["Price"].ToString().ToLower() == "hide")
                                                    {
                                                        if (style.Contains(","))
                                                        {
                                                            if (style.Split(',')[0] == orgStyle)
                                                            {
                                                            }
                                                        }
                                                        else
                                                        {

                                                        }
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input type =\"text\"   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readonly")
                                                    {
                                                        if (style.Contains(","))
                                                        {
                                                            if (style.Split(',')[0] == orgStyle)
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\"   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }
                                                        }
                                                        else
                                                        {
                                                            content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\"   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                        }


                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                    {
                                                        if (style.Contains(","))
                                                        {
                                                            if (style.Split(',')[0] == orgStyle)
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\"   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }
                                                        }
                                                        else
                                                        {
                                                            content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input type =\"text\"   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'   placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                        }

                                                    }

                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString() == firstColor)
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString())
                                                        {

                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio'  checked id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                        }
                                                        else
                                                        {
                                                            var clrs = lstC.Rows.OfType<System.Data.DataRow>().Select(dr1 => dr1["col"].ToString()).Distinct().ToList();
                                                            var sizelste = lstC.Rows.OfType<System.Data.DataRow>().Select(dr1 => dr1["SizeId"].ToString()).Distinct().ToList();
                                                            if (ucodeColorcnt > 1)
                                                            {
                                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'  id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                            }
                                                            else
                                                            {
                                                                if (sizelste.Count > 1)
                                                                {
                                                                    content = content + string.Format("<label class='swatchLabel'><input type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                                }
                                                                else
                                                                {
                                                                    content = content + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                                }
                                                            }

                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (prevHistory.Size.Trim() == dr.ItemArray[2].ToString())
                                                    {
                                                        content = content + string.Format("<label class='swatchLabel'><input type='radio' checked  id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1'   onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                    }
                                                    else
                                                    {
                                                        content = content + string.Format("<label class='swatchLabel'><input type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue' /><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                    }
                                                }
                                            }
                                        }

                                    }
                                    else
                                    {
                                        if ((bool)Session["IsManPack"] == false && (bool)Session["IsBulkOrder1"] == false)
                                        {
                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString() == firstColor)
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (reqDta == "")
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (reqDta == "")
                                                    {
                                                        content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\"   type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                    }
                                                    else
                                                    {
                                                        content = content + string.Format("<div class='col-md-1'></br><center><p>{0}</p><input  id=\"BulkSizeBox_{0}_{1}\" onfocus=\"GetQtyData()\" onblur=\"GetFreeData()\" type =\"number\"  min=\"0\"  class=\"BulkSizeBox_{0}_{1} form-control\" style=\"width:100%; text-align: center; \"/><div   style=\"margin-top:10px;margin-bottom:10px;\"><p><span id='LbPrice_" + style + "_" + dr.ItemArray[3].ToString() + "'>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</span></p></div></center></br></div> ", dr.ItemArray[3].ToString(), style, orgStyle);
                                                    }
                                                }
                                            }
                                        }
                                        else if ((bool)Session["IsBulkOrder1"] == true)
                                        {
                                            if (dr.ItemArray[1].ToString() == firstColor)
                                            {
                                                if (reqDta == "")
                                                {
                                                    if (Session["Price"].ToString().ToLower() == "hide")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-6'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-6'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readonly")
                                                    {

                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                    {
                                                        content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-5'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'   min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                    }
                                                }
                                                else
                                                {
                                                    if (Session["Price"].ToString().ToLower() == "hide")
                                                    {
                                                        if (style.Contains(","))
                                                        {
                                                            if (style.Split(',')[0] == orgStyle)
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  type =\"text\" placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }
                                                        }
                                                        else
                                                        {
                                                            content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-4'><center>" + dr.ItemArray[3].ToString() + "</center></div> <div class='col-md-4'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-4'><center><input   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  type =\"text\" placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                        }

                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readonly")
                                                    {
                                                        if (style.Contains(","))
                                                        {
                                                            if (style.Split(',')[0] == orgStyle)
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  type =\"text\" placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }
                                                        }
                                                        else
                                                        {
                                                            content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-3'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-3'><center>" + Session["CurrencySymbol"].ToString() + " " + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "</center></div><div class='col-md-3'><center><input type =\"number\" placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  type =\"text\" placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";

                                                        }

                                                    }
                                                    else if (Session["Price"].ToString().ToLower() == "readwrite")
                                                    {
                                                        if (style.Contains(","))
                                                        {
                                                            if (style.Split(',')[0] == orgStyle)
                                                            {
                                                                content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" style='text-align:right;' placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  type =\"text\" placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                            }
                                                        }
                                                        else
                                                        {
                                                            content = content + "<div class='col-md-4 BulkOrder1_" + style + "' style=\"margin-bottom:10px;border: solid 1px;padding: 15px;\"><div class='row'><div class='col-md-2'><center>" + dr.ItemArray[3].ToString() + "</center></div><div class='col-md-4'><div class='row'><div class='col-md-3' style='padding:0px;'><center>" + Session["CurrencySymbol"].ToString() + "</center></div><div class='col-md-9' style='padding:0px;'><center><input type='number' style='text-align:right' class='form-control' id='BulkOrder1_Price" + style + "' value='" + dp.GetPrice(style, dr.ItemArray[3].ToString(), Session["BuisnessId"].ToString()) + "' onchange=\"GetPriceValue('BulkOrder1_Price" + style + "')\"/></center></div></div></div><div class='col-md-3'><center><input type =\"number\" style='text-align:right;' placeholder='Quantity' id='" + style + "_" + dr.ItemArray[3].ToString() + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div><div class='col-md-3'><center><input   id='ReqData_" + style + "_" + dr.ItemArray[3].ToString() + "'  type =\"text\" placeholder='" + reqDta + "'  min=\"0\"  class=\"form-control\" style=\"width:100%; text-align: center; \"/></center></div></div></div>";
                                                        }

                                                    }


                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (lstC.Columns.Count > 3)
                                            {
                                                if (dr.ItemArray[1].ToString() == firstColor)
                                                {
                                                    if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                    {
                                                        if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString().Trim())
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"swatch_Size_" + style + "\" value='blue' checked/><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                        }
                                                        else
                                                        {
                                                            if (ucodeColorcnt > 1)
                                                            {
                                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'   id='radio' name=\"swatch_Size_" + style + "\" value='blue'/><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                            }
                                                            else
                                                            {
                                                                content = content + string.Format("<label class='swatchLabel'><input type='radio'   id='radio' name=\"swatch_Size_" + style + "\" value='blue' checked/><span class='spanner1'  onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[3].ToString());
                                                            }

                                                        }

                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                {
                                                    if (prevHistory.Size.Trim() == dr.ItemArray[3].ToString().Trim())
                                                    {
                                                        content = content + string.Format("<label class='swatchLabel'><input type='radio' checked id='radio' name=\"swatch_Size_" + style + "\" value='blue' checked/><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                    }
                                                    else
                                                    {
                                                        if (ucodeColorcnt > 1)
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue'/><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                        }
                                                        else
                                                        {
                                                            content = content + string.Format("<label class='swatchLabel'><input type='radio' id='radio' name=\"swatch_Size_" + style + "\" value='blue' checked/><span class='spanner1' onclick=\"getSelectedSizeSwatch('{0}','{1}')\"><center >{1}</center></span></label>", style, dr.ItemArray[2].ToString());
                                                        }

                                                    }

                                                }
                                            }
                                        }

                                    }

                                }
                                content = content + "</fieldset><br/>";
                                ViewContext.Writer.Write(content);
                            }
                        }
                    }
                    else
                    {
                        if (style.Contains(','))
                        {
                            Html.DevExpress().ComboBox(
                                        c =>
                                        {
                                            c.Name = "Size_" + "Drop_" + style + "_" + orgStyle;
                                            if (lstC != null)
                                            {
                                                foreach (System.Data.DataRow dr in lstC.Rows)
                                                {
                                                    if (lstC.Columns.Count > 3)
                                                    {
                                                        if (dr.ItemArray[1].ToString() == firstColor)
                                                        {
                                                            if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                            {
                                                                c.Properties.Items.Add(dr.ItemArray[3].ToString());
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                        {
                                                            c.Properties.Items.Add(dr.ItemArray[1].ToString());
                                                        }
                                                    }

                                                }
                                                if (c.Properties.Items.Count == 1)
                                                {
                                                    c.SelectedIndex = 0; c.Enabled = false;
                                                }
                                                c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedSize";
                                            }
                                            else
                                            {
                                                c.Enabled = false;
                                            }
                                        }
                                                        ).Render();
                        }
                        else
                        {
                            Html.DevExpress().ComboBox(
                                        c =>
                                        {
                                            c.Name = "Size_" + "Drop_" + style + "_" + orgStyle;
                                            if (lstC != null)
                                            {
                                                foreach (System.Data.DataRow dr in lstC.Rows)
                                                {
                                                    if (lstC.Columns.Count > 3)
                                                    {
                                                        if (dr.ItemArray[1].ToString() == firstColor)
                                                        {
                                                            if (Convert.ToInt16(dr.ItemArray[4].ToString()) == 0)
                                                            {
                                                                c.Properties.Items.Add(dr.ItemArray[3].ToString());
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (Convert.ToInt16(dr.ItemArray[2].ToString()) == 0)
                                                        {
                                                            c.Properties.Items.Add(dr.ItemArray[1].ToString());
                                                        }
                                                    }
                                                }
                                                if (c.Properties.Items.Count == 1)
                                                {
                                                    c.SelectedIndex = 0; c.Enabled = false;
                                                }
                                                c.Properties.ClientSideEvents.SelectedIndexChanged = "getSelectedSize";
                                            }
                                            else
                                            {
                                                c.Enabled = false;
                                            }
                                        }
                                                            ).Render();
                        }
                    }
                }
            });

        });
        #endregion

        #region price
        if ((bool)Session["IsManPack"] == true)
        {
            settings.CardLayoutProperties.Items.Add(x =>
            {
                x.ColumnName = "Price";
                x.ShowCaption = DefaultBoolean.False;
                x.SetTemplateContent(col =>
                {
                    if (template.Count > 0)
                    {
                        var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                        ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbTemplatePrice" + style + "'>{0}</div>", ""));
                        //ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbPrice" + style + "'>{0}</div>", price));
                    }
                    else
                    {
                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(col.DataItem, "HasPreviousSize"));
                        var style = (DataBinder.Eval(col.DataItem, "StyleID")).ToString();
                        if (style.Contains(','))
                        {

                            var styleArr = style.Split(',');
                            string style1 = styleArr[0].ToString();
                            var color = home._style_Colour.Exists(s => s.StyleID == style1) == true ? home._style_Colour.GetAll(s => s.StyleID == style1).OrderBy(s => s.ColourID).FirstOrDefault().ColourID : "";
                            var size = home._style_Sizes.Exists(s => s.StyleID == style1) == true ? home._style_Sizes.GetAll(s => s.StyleID == style1).OrderBy(s => s.SeqNo).Count() == 1 ? home._style_Sizes.GetAll(s => s.StyleID == style1).OrderBy(s => s.SeqNo).FirstOrDefault().SizeID : "" : "";
                            var price = size == "" ? "" : _dataConnection.GetStyleSizePrices(style1, size, businessId).ToString();
                            if (prevHistory.Size != "")
                            {
                                price = _dataConnection.GetStyleSizePrices(style1, prevHistory.Size, businessId).ToString();
                                if (price == "")
                                {
                                    price = _dataConnection.GetStyleSizePrices(style1, prevHistory.Size, "All").ToString();
                                }
                            }
                            if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() != "readwrite")
                            {
                                ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbPrice" + style + "'><input class='form-control' id='LbPriceinput" + style + "' readonly  type=\"number\" min=\"1\" max=\"10000\" value='{0}'/></div>", price));
                            }
                            else if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() == "readwrite")
                            {
                                ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbPrice" + style + "'><input class='form-control' id='LbPriceinput" + style + "' type=\"number\" min=\"1\" max=\"10000\" value='{0}'/></div>", price));
                            }
                        }
                        else
                        {
                            // string businessId = Session["BuisnessId"].ToString();
                            var color = home._style_Colour.Exists(s => s.StyleID == style) == true ? home._style_Colour.GetAll(s => s.StyleID == style).OrderBy(s => s.ColourID).FirstOrDefault().ColourID : "";
                            var size = home._style_Sizes.Exists(s => s.StyleID == style) == true ? home._style_Sizes.GetAll(s => s.StyleID == style).OrderBy(s => s.SeqNo).Count() == 1 ? home._style_Sizes.GetAll(s => s.StyleID == style).OrderBy(s => s.SeqNo).FirstOrDefault().SizeID : "" : "";
                            var price = size == "" ? "" : _dataConnection.GetStyleSizePrices(style, size, businessId).ToString();
                            if (prevHistory.Size != "")
                            {
                                price = _dataConnection.GetStyleSizePrices(style, prevHistory.Size, businessId).ToString();
                                if (price == "")
                                {
                                    price = _dataConnection.GetStyleSizePrices(style, prevHistory.Size, businessId).ToString();
                                }
                            }
                            if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() != "readwrite")
                            {
                                ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbPrice" + style + "'><input class='form-control' readonly id='LbPriceinput" + style + "' type=\"number\" min=\"1\" max=\"10000\" value='{0}'/></div>", price));
                            }
                            else if (Session["Price"].ToString().ToLower() != "hide" && Session["Price"].ToString().ToLower() == "readwrite")
                            {
                                ViewContext.Writer.Write(string.Format("<b>Price</b><hr style='margin: 0;'/><br/><div id='LbPrice" + style + "'><input class='form-control' id='LbPriceinput" + style + "' type=\"number\" min=\"1\" max=\"10000\" value='{0}'/></div>", price));

                            }
                        }
                    }
                });


            });
        }
        #endregion

        #region qty
        settings.CardLayoutProperties.Items.Add(x =>
        {
            x.ShowCaption = DefaultBoolean.False;
            x.SetTemplateContent(cont =>
            {
                if (template.Count > 0)
                {
                    var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                    var reqDta = DataBinder.Eval(cont.DataItem, "ReqData") != null ? (DataBinder.Eval(cont.DataItem, "ReqData")).ToString() : "";
                    var content = "";
                    if (reqDta == "")
                    {
                        if ((bool)Session["IsManPack"] == true || (bool)Session["IsBulkOrder"] == true)
                        {
                            content = content + "<div class='row reqData" + style + "' style=\"display:none;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeading" + style + "'></span></b><hr style='margin: 0;'/><div><input class='form-control reqdatatxt" + style + "'  id='reqdatatxt" + style + "' style='margin-top:10px' type=\"text\"/><br/></div></div></div>";
                        }
                        if ((bool)Session["IsManPack"] == true)
                        {
                            content = content + string.Format("<div class='row'><div class='col-md-4  col-xs-12 col-sm-12 col-lg-4'><b>Quantity</b><hr style='margin: 0;'/><div style='margin: 0;' class=\"center pull-left\"><p></p><div class=\"input-group\"><span class=\"input-group-btn\"><button type='button' class='qtyminus btn backg' field='{0}'><span class=\"glyphicon glyphicon-minus\"></span></button></span><input type='text' name='{0}'  class=\"qtyTextBox form-control  input-number\" value=\"1\" min=\"1\" max=\"10000000\"><span class=\"input-group-btn\"><button type='button' class='qtyplus  btn backg' field='{0}'><span class=\"glyphicon glyphicon-plus\"></span></button></span></div><p></p></div>", "spinEdit_" + style);
                        }

                        content = content + "</div>";
                    }
                    else
                    {
                        if ((bool)Session["IsManPack"] == true || (bool)Session["IsBulkOrder"] == true)
                        {
                            content = content + "<div class='row reqData" + style + "' style=\"display:block;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeading" + style + "'>" + reqDta + "</span></b><hr style='margin: 0;'/><div><input class='form-control reqdatatxt" + style + "'  id='reqdatatxt" + style + "' style='margin-top:10px' type=\"text\"/><br/></div></div></div>";
                        }
                        if ((bool)Session["IsManPack"] == true)
                        {
                            content = content + string.Format("<div class='row'><div class='col-md-4  col-xs-12 col-sm-12 col-lg-4'><b>Quantity</b><hr style='margin: 0;'/><div style='margin: 0;' class=\"center pull-left\"><p></p><div class=\"input-group\"><span class=\"input-group-btn\"><button type='button' class='qtyminus btn backg' field='{0}'><span class=\"glyphicon glyphicon-minus\"></span></button></span><input type='text' name='{0}'  class=\"qtyTextBox form-control  input-number\" value=\"1\" min=\"1\" max=\"10000000\"><span class=\"input-group-btn\"><button type='button' class='qtyplus  btn backg' field='{0}'><span class=\"glyphicon glyphicon-plus\"></span></button></span></div><p></p></div>", "spinEdit_" + style);
                        }
                        content = content + "</div>";
                    }
                    ViewContext.Writer.Write(content);

                    if (Session["OVERRIDE_ENT_WITH_REASON"].ToString().ToLower() == "show" && reason)
                    {
                        ViewContext.Writer.Write("<div class='col-md-4'><b>Reason</b><hr style='margin:0px'/><br><center   style='margin: -7px;'");
                        if (template.Count > 0)
                        {
                            //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                            var reasons = home._reason.Exists(xs => xs.BusinessId == businessId) ? home._reason.GetAll(xs => xs.BusinessId == businessId).Select(c => new { c.Description }).ToList() : null;

                            if (reasons != null)
                            {
                                Html.DevExpress().ComboBox(edit =>
                                {
                                    //edit.Width = System.Web.UI.WebControls.Unit.Pixel(350);
                                    edit.ControlStyle.CssClass = "styler";
                                    edit.Name = "CmbReasonTemplate_" + style;
                                    if (reasons.Count > 0)
                                    {
                                        foreach (var dta in reasons)
                                        {
                                            edit.Properties.Items.Add(dta.Description);
                                        }
                                    }
                                    else
                                    {

                                        edit.Enabled = false;
                                        edit.ToolTip = "No return reasons found for the current customer";
                                    }
                                }).GetHtml();
                                //ViewContext.Writer.Write("</div>");
                            }
                        }
                        else
                        {
                            //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                            //ViewContext.Writer.Write("<div class='col-md-2'>");
                            Html.DevExpress().ComboBox(edit =>
                            {
                                //edit.Width = System.Web.UI.WebControls.Unit.Pixel(350);
                                edit.ControlStyle.CssClass = "styler";
                                edit.Name = "CmbReason_" + style; edit.Width = System.Web.UI.WebControls.Unit.Pixel(300);
                                string BusinessId = Session["BuisnessId"].ToString();
                                var reasons = home._reason.GetAll(xs => xs.BusinessId == BusinessId).Select(c => new { c.Description }).ToList();
                                if (reasons.Count > 0)
                                {
                                    foreach (var dta in reasons)
                                    {
                                        edit.Properties.Items.Add(dta.Description);
                                    }
                                }
                                else
                                {

                                    edit.Enabled = false;
                                    edit.ToolTip = "No return reasons found for the current customer";
                                }
                            }).GetHtml();
                            //ViewContext.Writer.Write("</div>");
                        }
                        ViewContext.Writer.Write("</center></div>");
                    }
                    else
                    {
                        ViewContext.Writer.Write("<div class='col-md-4'></div>");
                    }
                    ViewContext.Writer.Write("<div class='col-md-3' style='margin-top:26px;'>");
                    if (template.Count > 0)
                    {
                        //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(cont.DataItem, "HasPreviousSize"));
                        Html.DevExpress().Button(btn =>
                        {
                            // btn.Width = System.Web.UI.WebControls.Unit.Pixel(305);
                            btn.Name = "CartbtnTemplate_" + style + "_" + prevHistory.OrdQty;
                            btn.ControlStyle.CssClass = "cartBtn";
                            btn.Text = "Add to cart &nbsp;&nbsp;<span class='glyphicon glyphicon-shopping-cart'></span>";
                            btn.EncodeHtml = false;
                            btn.ControlStyle.CssClass = "cartBtn";
                            if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                            {
                                if ((bool)Session["IsManPack"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addTocartTemplateSwatch";
                                    //btn.ClientSideEvents.Click = "addTocartSwatch";
                                }
                                else if ((bool)Session["IsBulkOrder1"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addTocartTemplateBulkOrder1";
                                    //btn.ClientSideEvents.Click = "addToCartBulkOrder1";
                                }

                            }
                            else
                            {
                                btn.ClientSideEvents.Click = "addTocartTemplate";
                            }
                        }).GetHtml();

                    }
                    else
                    {
                        //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                        var orgStyle = (DataBinder.Eval(cont.DataItem, "OriginalStyleid")).ToString();
                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(cont.DataItem, "HasPreviousSize"));
                        Html.DevExpress().Button(btn =>
                        {
                            int ordQty = prevHistory == null ? 0 : prevHistory.OrdQty;
                            //btn.Width = System.Web.UI.WebControls.Unit.Pixel(305);
                            btn.Name = "Cartbtn_" + style + "_" + ordQty + "_" + orgStyle;
                            btn.ControlStyle.CssClass = "cartBtn";
                            btn.Text = "Add to cart &nbsp;&nbsp;<span class='glyphicon glyphicon-shopping-cart'></span>";
                            btn.ControlStyle.CssClass = "cartBtn";
                            if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                            {

                                if ((bool)Session["IsManPack"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addTocartSwatch";
                                }
                                else if ((bool)Session["IsBulkOrder1"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addToCartBulkOrder1";
                                }

                            }
                            else
                            {
                                btn.ClientSideEvents.Click = "addTocart";
                            }
                            btn.EncodeHtml = false;

                        }).GetHtml();
                    }
                    ViewContext.Writer.Write("</div><div class='col-md-1'></div></div>");
                }
                else
                {
                    var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                    var orgStyle = (DataBinder.Eval(cont.DataItem, "OriginalStyleid")).ToString();
                    var reqDta = DataBinder.Eval(cont.DataItem, "ReqData") != null ? (DataBinder.Eval(cont.DataItem, "ReqData")).ToString() : "";
                    var content = "";
                    if (reqDta == "")
                    {
                        if ((bool)Session["IsManPack"] == true || (bool)Session["IsBulkOrder"] == true)
                        {
                            content = content + "<div class='row reqData" + style + "' style=\"display:none;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeading" + style + "'></span></b><hr style='margin: 0;'/><div> <input class='form-control reqdatatxt" + style + "' style='margin-top:10px'   type=\"text\"/><br/></div></div></div>";
                        }
                        if ((bool)Session["IsManPack"] == true)
                        {
                            content = content + string.Format("<div class='row'><div class='col-md-4   col-xs-12 col-sm-12 col-lg-4'><b>Quantity</b><hr style='margin: 0;'/><div style='margin: 0;' class=\"center pull-left\"><p></p><div class=\"input-group\"><span class=\"input-group-btn\"><button type='button' class='qtyminus btn backg' field='{0}'><span class=\"glyphicon glyphicon-minus\"></span></button></span><input  type='text' name='{0}'   class=\"qtyTextBox form-control  input-number\" value=\"1\" min=\"1\" max=\"10000000\"><span class=\"input-group-btn\"><button type='button' class='qtyplus  btn backg' field='{0}'><span class=\"glyphicon glyphicon-plus\"></span></button></span></div><p></p></div>", "spinEdit_" + style);
                        }
                        content = content + "</div>";
                    }
                    else
                    {
                        if ((bool)Session["IsManPack"] == true || (bool)Session["IsBulkOrder"] == true)
                        {
                            if (style.Contains(","))
                            {
                                if (style.Split(',')[0] == orgStyle)
                                {
                                    content = content + "<div class='row reqData" + style + "' style=\"display:block;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeading" + style + "'>" + reqDta + "</span></b><hr style='margin: 0;'/><div> <input class='form-control reqdatatxt" + style + "' style='margin-top:10px'   type=\"text\"/><br/></div></div></div>";
                                }
                                else
                                {
                                    content = content + "<div class='row reqData" + style + "' style=\"display:none;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeading" + style + "'></span></b><hr style='margin: 0;'/><div> <input class='form-control reqdatatxt" + style + "' style='margin-top:10px'   type=\"text\"/><br/></div></div></div>";
                                }
                            }
                            else
                            {
                                content = content + "<div class='row reqData" + style + "' style=\"display:block;\"><div class='col-md-4 col-xs-4 col-sm-4 col-lg-4'><b><span class='reqDataHeading" + style + "'>" + reqDta + "</span></b><hr style='margin: 0;'/><div> <input class='form-control reqdatatxt" + style + "' style='margin-top:10px'   type=\"text\"/><br/></div></div></div>";
                            }

                        }
                        if ((bool)Session["IsManPack"] == true)
                        {
                            content = content + string.Format("<div class='row'><div class='col-md-4   col-xs-12 col-sm-12 col-lg-4'><b>Quantity</b><hr style='margin: 0;'/><div style='margin: 0;' class=\"center pull-left\"><p></p><div class=\"input-group\"><span class=\"input-group-btn\"><button type='button' class='qtyminus btn backg' field='{0}'><span class=\"glyphicon glyphicon-minus\"></span></button></span><input  type='text' name='{0}'   class=\"qtyTextBox form-control  input-number\" value=\"1\" min=\"1\" max=\"10000000\"><span class=\"input-group-btn\"><button type='button' class='qtyplus  btn backg' field='{0}'><span class=\"glyphicon glyphicon-plus\"></span></button></span></div><p></p></div>", "spinEdit_" + style);
                        }
                        content = content + "</div>";
                    }
                    ViewContext.Writer.Write(content);

                    if (Session["OVERRIDE_ENT_WITH_REASON"].ToString().ToLower() == "show" && reason)
                    {
                        ViewContext.Writer.Write("<div class='col-md-4'><b>Reason</b><hr style='margin:0px'/><br>");
                        if (template.Count > 0)
                        {
                            //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                            var reasons = home._reason.Exists(xs => xs.BusinessId == businessId) ? home._reason.GetAll(xs => xs.BusinessId == businessId).Select(c => new { c.Description }).ToList() : null;

                            if (reasons != null)
                            {
                                Html.DevExpress().ComboBox(edit =>
                                {
                                    edit.Name = "CmbReasonTemplate_" + style;
                                    edit.Width = System.Web.UI.WebControls.Unit.Pixel(350);
                                    edit.ControlStyle.CssClass = "styler";
                                    if (reasons.Count > 0)
                                    {
                                        foreach (var dta in reasons)
                                        {
                                            edit.Properties.Items.Add(dta.Description);
                                        }
                                    }
                                    else
                                    {

                                        edit.Enabled = false;
                                        edit.ToolTip = "No return reasons found for the current customer";
                                    }
                                }).GetHtml();
                                //ViewContext.Writer.Write("</div>");
                            }
                        }
                        else
                        {
                            //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                            //ViewContext.Writer.Write("<div class='col-md-2'>");
                            Html.DevExpress().ComboBox(edit =>
                            {
                                edit.Name = "CmbReason_" + style;
                                string BusinessId = Session["BuisnessId"].ToString();
                                var reasons = home._reason.GetAll(xs => xs.BusinessId == BusinessId).Select(c => new { c.Description }).ToList();
                                edit.Width = System.Web.UI.WebControls.Unit.Pixel(350);
                                edit.ControlStyle.CssClass = "styler";
                                if (reasons.Count > 0)
                                {
                                    foreach (var dta in reasons)
                                    {
                                        edit.Properties.Items.Add(dta.Description);
                                    }
                                }
                                else
                                {

                                    edit.Enabled = false;
                                    edit.ToolTip = "No return reasons found for the current customer";
                                }
                            }).GetHtml();
                            //ViewContext.Writer.Write("</div>");
                        }
                        ViewContext.Writer.Write("</div>");
                    }
                    else
                    {
                        ViewContext.Writer.Write("<div class='col-md-4'></div>");
                    }
                    ViewContext.Writer.Write("<div class='col-md-3' style='margin-top:26px;'>");
                    if (template.Count > 0)
                    {
                        //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();
                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(cont.DataItem, "HasPreviousSize"));
                        Html.DevExpress().Button(btn =>
                        {
                            // btn.Width = System.Web.UI.WebControls.Unit.Pixel(305);
                            btn.Name = "CartbtnTemplate_" + style + "_" + prevHistory.OrdQty;
                            btn.ControlStyle.CssClass = "cartBtn";
                            btn.Text = "Add to cart &nbsp;&nbsp;<span class='glyphicon glyphicon-shopping-cart'></span>";
                            btn.EncodeHtml = false;
                            btn.ControlStyle.CssClass = "cartBtn";
                            if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                            {
                                if ((bool)Session["IsManPack"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addTocartTemplateSwatch";
                                    //btn.ClientSideEvents.Click = "addTocartSwatch";
                                }
                                else if ((bool)Session["IsBulkOrder1"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addTocartTemplateBulkOrder1";
                                    //btn.ClientSideEvents.Click = "addToCartBulkOrder1";
                                }

                            }
                            else
                            {
                                btn.ClientSideEvents.Click = "addTocartTemplate";
                            }
                        }).GetHtml();

                    }
                    else
                    {
                        //var style = (DataBinder.Eval(cont.DataItem, "StyleID")).ToString();

                        Maximus.Data.Models.PreviousQty prevHistory = (Maximus.Data.Models.PreviousQty)(DataBinder.Eval(cont.DataItem, "HasPreviousSize"));
                        Html.DevExpress().Button(btn =>
                        {
                            int ordQty = prevHistory == null ? 0 : prevHistory.OrdQty;
                            //btn.Width = System.Web.UI.WebControls.Unit.Pixel(305);
                            btn.Name = "Cartbtn_" + style + "_" + ordQty + "_" + orgStyle;

                            btn.Text = "Add to cart &nbsp;&nbsp;<span class='glyphicon glyphicon-shopping-cart'></span>";
                            btn.ControlStyle.CssClass = "cartBtn";
                            if (Session["ColorSizestyle"].ToString() == "SWATCHES")
                            {

                                if ((bool)Session["IsManPack"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addTocartSwatch";
                                }
                                else if ((bool)Session["IsBulkOrder1"] == true)
                                {
                                    btn.ClientSideEvents.Click = "addToCartBulkOrder1";
                                }
                            }
                            else
                            {
                                btn.ClientSideEvents.Click = "addTocart";
                            }
                            btn.EncodeHtml = false;

                        }).GetHtml();
                    }
                    ViewContext.Writer.Write("</div><div class='col-md-1'></div></div>");

                    //Html.DevExpress().SpinEdit(edit =>
                    //{
                    //    edit.Name = "spinEdit_" + style;
                    //    edit.Properties.AllowMouseWheel = true;
                    //    edit.Properties.AllowUserInput = true;
                    //    edit.Properties.MinValue = 1;
                    //    edit.Number = 1;
                    //    edit.Properties.MaxValue = 1000000;
                    //}).GetHtml();
                }
            });

        });
        #endregion

        #endregion

        #region assigning values to the combobox
        #endregion
    });
    if (ViewData["EditError"] != null)
    {
        cardView.SetEditErrorText((string)ViewData["EditError"]);
    }
}
@cardView.Bind(Model).GetHtml()






@*<div class=\"input-group\">
        <span class=\"input-group-btn\">
            <button type='button' class='qtyminus btn' field='quantity123'>
            <span class=\"glyphicon glyphicon-minus\"></span>
            </button>
        </span>
        <input type='text' name='quantity123' class=\"form-control input-number\" value=\"1\" min=\"1\" max=\"10000000\">
        <span class=\"input-group-btn\">
            <button type='button' class='qtyplus  btn' field='quantity123'>
                <span class=\"glyphicon glyphicon-plus\"></span>
            </button>
        </span>
    </div>*@
@*<br />
    <br />
    <br />
    <div class="alert alert-success" style="height:100%;width:100%">

    </div>*@
